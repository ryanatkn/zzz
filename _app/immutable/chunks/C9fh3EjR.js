import"./DsnmJJEf.js";import{p as Y,f as a,a as H,s as c,z as T,x as b,I as B,b as s,c as z,n as J,h as K,d as C,t as A,y as E,r as G,$ as Q}from"./vp8LXHGR.js";import{t as U,s as W}from"./-QCXjV-k.js";import{s as N}from"./pja_h9dl.js";import{s as X,r as Z,i as M}from"./Dl5udER_.js";import{r as tt}from"./Dz-m46CK.js";import{N as et}from"./CBmTHx_A.js";import{i as g,a as O,w as rt,b as st,o as at,x as ot}from"./CtEBPyZ8.js";import{C as nt,a as it,b as pt}from"./BJY7tJ5G.js";import{C as k}from"./DQQ4WCVB.js";import{f as j,P as R}from"./Dt1T9vKA.js";import{D as lt}from"./DCSYI1HK.js";import{S as mt,s as S,a as I}from"./xFOcpjon.js";var ct=a("<span>add text part</span>"),dt=a("<span>add file part</span>"),ut=a("<span>remove all parts</span>"),_t=a("<span>delete prompt</span>"),ft=a("<!> <!> <!> <!> <!>",1),vt=a("<!> <!>",1);function gt(h,t){Y(t,!0);const y=e=>{it(e,{icon:m=>{g(m,{get glyph(){return O}})},menu:m=>{var $=ft(),i=H($);pt(i,{get content(){return t.prompt.content},label:"copy content",get preview(){return t.prompt.content_preview}});var u=c(i,2);k(u,{run:()=>{t.prompt.add_part(R.create(o,{type:"text",content:""}))},icon:r=>{g(r,{get glyph(){return rt}})},children:(r,f)=>{var v=ct();s(r,v)},$$slots:{icon:!0,default:!0}});var L=c(u,2);k(L,{run:()=>{if(!o.diskfiles.items.size){alert("No files available. Add files first.");return}T(p,!0)},icon:r=>{g(r,{get glyph(){return st}})},children:(r,f)=>{var v=dt();s(r,v)},$$slots:{icon:!0,default:!0}});var D=c(L,2);{var F=_=>{k(_,{run:()=>t.prompt.remove_all_parts(),icon:f=>{g(f,{get glyph(){return ot}})},children:(f,v)=>{var q=ut();s(f,q)},$$slots:{icon:!0,default:!0}})};M(D,_=>{t.prompt.parts.length&&_(F)})}var V=c(D,2);k(V,{run:()=>{confirm(`Are you sure you want to delete prompt "${t.prompt.name}"?`)&&o.prompts.remove(t.prompt)},icon:r=>{g(r,{get glyph(){return at}})},children:(r,f)=>{var v=_t();s(r,v)},$$slots:{icon:!0,default:!0}}),s(m,$)},children:(m,$)=>{J();var i=K("prompt");s(m,i)},$$slots:{icon:!0,menu:!0,default:!0}})},d=Z(t,["$$slots","$$events","$$legacy","prompt"]),o=j.get();let p=B(!1);var P=vt(),l=H(P);nt(l,X(()=>d,{get entries(){return y}}));var n=c(l,2);lt(n,{onpick:e=>e?(t.prompt.add_part(R.create(o,{type:"diskfile",path:e.path})),!0):!1,get show(){return b(p)},set show(e){T(p,e,!0)}}),s(h,P),z()}var ht=a("<small> </small>"),yt=a('<div class="ellipsis"><!> <span> </span></div> <!>',1);function Pt(h,t){Y(t,!0),gt(h,{get prompt(){return t.prompt},children:(y,d)=>{{let o=E(()=>tt(`/prompts/${t.prompt.id}`));et(y,{get href(){return b(o)},get selected(){return t.selected},class:"justify_content_space_between",style:"min-height: 0;",children:(p,P)=>{var l=yt(),n=H(l),e=C(n);g(e,{get glyph(){return O},class:"mr_xs2"});var x=c(e,2),w=C(x,!0);G(x),G(n);var m=c(n,2);{var $=i=>{var u=ht(),L=C(u,!0);G(u),A(()=>N(L,t.prompt.parts.length)),s(i,u)};M(m,i=>{t.prompt.parts.length&&i($)})}A(()=>N(w,t.prompt.name)),s(p,l)},$$slots:{default:!0}})}},$$slots:{default:!0}}),z()}var xt=a("<div><!></div>");function At(h,t){Y(t,!0);const y=j.get(),{prompts:d}=y,o=E(()=>d.selected_id);{const p=(l,n=Q)=>{var e=xt(),x=C(e);{let w=E(()=>n().id===b(o));Pt(x,{get prompt(){return n()},get selected(){return b(w)}})}G(e),U(3,e,()=>W),s(l,e)};let P=E(()=>[S("created_newest","created (newest)","created","desc"),S("created_oldest","created (oldest)","created","asc"),I("name_asc","name (a-z)","name"),I("name_desc","name (z-a)","name","desc")]);mt(h,{get items(){return d.ordered_items},get show_sort_controls(){return d.show_sort_controls},get sorters(){return b(P)},sort_key_default:"updated_newest",no_items:"",children:p,$$slots:{default:!0}})}z()}export{At as P,gt as a};
