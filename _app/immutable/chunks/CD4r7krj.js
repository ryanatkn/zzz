import"./DsnmJJEf.js";import{k as g,i as u,l as m,p as R,g as N,f as B,b as l,c as V,s as Q,d as E,r as z,e as k,a as y,m as I,j as S}from"./DsYFF3e0.js";import{o as X,a as w}from"./D6t6EFf3.js";import{p as x,i as A,r as q,s as T}from"./Nwe5dM3j.js";import{k as Y,I as G,h as j,E as H}from"./dRtQjgBD.js";import{t as M,a as O}from"./R2QwTmpq.js";import{s as W}from"./BlUH4YWX.js";import{U as Z}from"./S68OugPJ.js";import{d as $}from"./23rF6zAW.js";const tt=(h="center",t="center",e="0")=>{const i={position:"absolute","z-index":"10"},n=e!=="0";switch(h){case"left":i.right=n?`calc(100% + ${e})`:"100%",i.left="auto",i.transform="",i.top=t==="center"?"50%":t==="start"?"0":"auto",i.bottom=t==="end"?"0":"auto",i["transform-origin"]="right",t==="center"&&(i.transform="translateY(-50%)");break;case"right":i.left=n?`calc(100% + ${e})`:"100%",i.right="auto",i.transform="",i.top=t==="center"?"50%":t==="start"?"0":"auto",i.bottom=t==="end"?"0":"auto",i["transform-origin"]="left",t==="center"&&(i.transform="translateY(-50%)");break;case"top":i.bottom=n?`calc(100% + ${e})`:"100%",i.top="auto",i.transform="",i.left=t==="center"?"50%":t==="start"?"0":"auto",i.right=t==="end"?"0":"auto",i["transform-origin"]="bottom",t==="center"&&(i.transform="translateX(-50%)");break;case"bottom":i.top=n?`calc(100% + ${e})`:"100%",i.bottom="auto",i.transform="",i.left=t==="center"?"50%":t==="start"?"0":"auto",i.right=t==="end"?"0":"auto",i["transform-origin"]="top",t==="center"&&(i.transform="translateX(-50%)");break;case"center":i.top="50%",i.left="50%",i.transform="translate(-50%, -50%)",i["transform-origin"]="center";break;case"overlay":i.top="0",i.left="0",i.width="100%",i.height="100%",i["transform-origin"]="center";break;default:throw new Z(h)}return i};class it{#c=g(!1);get visible(){return u(this.#c)}set visible(t){m(this.#c,t,!0)}#l=g("bottom");get position(){return u(this.#l)}set position(t){m(this.#l,t,!0)}#_=g("center");get align(){return u(this.#_)}set align(t){m(this.#_,t,!0)}#h=g("0");get offset(){return u(this.#h)}set offset(t){m(this.#h,t,!0)}#f=g(!1);get disable_outside_click(){return u(this.#f)}set disable_outside_click(t){m(this.#f,t,!0)}#d=g("");get popover_class(){return u(this.#d)}set popover_class(t){m(this.#d,t,!0)}#i=null;#t=null;#o=null;#n=void 0;#a=void 0;#e=void 0;constructor(t){t&&this.update(t)}#s(){this.visible&&!this.disable_outside_click&&!this.#e?this.#e=X(document,"click",t=>{const e=t.target;this.#t&&this.#i&&!this.#t.contains(e)&&!this.#i.contains(e)&&(!this.#o||!this.#o.contains(e))&&this.hide()}):(!this.visible||this.disable_outside_click)&&this.#e&&(this.#e(),this.#e=void 0)}update(t){const e=this.popover_class,i=this.disable_outside_click;t.position!==void 0&&(this.position=t.position),t.align!==void 0&&(this.align=t.align),t.offset!==void 0&&(this.offset=t.offset),t.popover_class!==void 0&&(this.popover_class=t.popover_class),t.disable_outside_click!==void 0&&(this.disable_outside_click=t.disable_outside_click),this.#t&&t.popover_class!==void 0&&e!==t.popover_class&&(e&&this.#t.classList.remove(e),this.popover_class&&this.#t.classList.add(this.popover_class)),t.disable_outside_click!==void 0&&i!==this.disable_outside_click&&this.#s(),t.onshow!==void 0&&(this.#n=t.onshow),t.onhide!==void 0&&(this.#a=t.onhide),this.#r()}#r(){if(this.#i&&(this.#i.setAttribute("aria-expanded",this.visible?"true":"false"),this.#t)){const t=this.#t.id||`popover-content-${$()}`;this.#t.id=t,this.#i.setAttribute("aria-controls",t)}}show(){this.visible||(this.visible=!0,this.#s(),this.#r(),this.#n&&this.#n())}hide(){this.visible&&(this.visible=!1,this.#s(),this.#r(),this.#a&&this.#a())}toggle(t=!this.visible){t?this.show():this.hide()}container=t=>(this.#o=t,()=>{this.#o===t&&(this.#o=null)});trigger=t=>e=>{this.#i=e,t&&this.update(t),this.#r();const i=X(e,"click",n=>{W(n),this.toggle()});return()=>{i(),this.#i===e&&(this.#i=null)}};content=t=>e=>(this.#t=e,t&&this.update(t),this.popover_class&&e.classList.add(this.popover_class),e.style.position="absolute",e.style.zIndex="10",(()=>{const n=tt(this.position,this.align,this.offset),P=["top","bottom","left","right","transform","transform-origin","width","height"];for(const r of P)e.style.removeProperty(r);for(const r in n)e.style.setProperty(r,n[r])})(),this.#s(),e.hasAttribute("role")||e.setAttribute("role","dialog"),()=>{this.#e&&(this.#e(),this.#e=void 0),this.popover_class&&e.classList.remove(this.popover_class),this.#t===e&&(this.#t=null)})}var et=B("<button><!></button>"),ot=B("<div><!></div>"),st=B("<div><!> <!></div>");function rt(h,t){R(t,!0);const e=x(t,"position",3,"bottom"),i=x(t,"align",3,"center"),n=x(t,"disable_outside_click",3,!1),P=q(t,["$$slots","$$events","$$legacy","position","align","disable_outside_click","popover_class","popover_attrs","popover_content","popover_container_attrs","button","children"]),r=new it;N(()=>{t.disabled&&r.hide()});var c=st();Y(c,()=>({...t.popover_container_attrs,class:`position_relative ${t.popover_container_attrs?.class??""}`}));var f=E(c);{var v=s=>{var o=k(),a=y(o);w(a,()=>t.button,()=>r),l(s,o)},_=s=>{var o=et();Y(o,()=>({type:"button",class:"icon_button",...P}));var a=E(o);w(a,()=>t.children??I,()=>r),z(o),G(o,()=>r.trigger({position:e(),align:i(),disable_outside_click:n()})),l(s,o)};A(f,s=>{t.button?s(v):s(_,!1)})}var b=Q(f,2);{var L=s=>{var o=ot();Y(o,()=>({...t.popover_attrs}));var a=E(o);w(a,()=>t.popover_content,()=>r),z(o),G(o,()=>r.content({position:e(),align:i(),disable_outside_click:n(),popover_class:t.popover_class})),M(1,o,()=>O,()=>({duration:80})),M(2,o,()=>O,()=>({duration:200})),l(s,o)};A(b,s=>{r.visible&&s(L)})}z(c),G(c,()=>r.container),l(h,c),V()}var nt=B("<button><!></button>");function bt(h,t){R(t,!0);const e=(c,f=I)=>{var v=k(),_=y(v);{var b=s=>{var o=k(),a=y(o);w(a,()=>t.children,f,()=>()=>r(f())),l(s,o)},L=s=>{j(s,{get glyph(){return H}})};A(_,s=>{t.children?s(b):s(L,!1)})}l(c,v)},i=x(t,"hide_on_confirm",3,!0),n=x(t,"position",3,"left"),P=q(t,["$$slots","$$events","$$legacy","onconfirm","popover_button_attrs","hide_on_confirm","position","popover_content","popover_button_content","button","children"]),r=c=>{i()&&c.hide(),t.onconfirm(c)};{const c=(v,_=I)=>{var b=k(),L=y(b);{var s=a=>{var d=k(),C=y(d);w(C,()=>t.popover_content,_,()=>()=>r(_())),l(a,d)},o=a=>{var d=nt(),C=()=>r(_());Y(d,()=>({type:"button",class:"icon_button color_c",onclick:C,title:`confirm ${(t.title||"")??""}`,...t.popover_button_attrs}),void 0,void 0,"svelte-1mmz1l6");var D=E(d);{var F=p=>{var U=k(),K=y(U);w(K,()=>t.popover_button_content,_,()=>()=>r(_())),l(p,U)},J=p=>{j(p,{get glyph(){return H}})};A(D,p=>{t.popover_button_content?p(F):p(J,!1)})}z(d),l(a,d)};A(L,a=>{t.popover_content?a(s):a(o,!1)})}l(v,b)};let f=S(()=>t.button?void 0:e);rt(h,T({get position(){return n()},get button(){return t.button}},()=>P,{get children(){return u(f)},popover_content:c,$$slots:{popover_content:!0}}))}V()}export{bt as C,rt as P};
