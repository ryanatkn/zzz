import"./DsnmJJEf.js";import{p as Z,i as b,j as X,c as K,e as J,a as A,b as o,f as d,d as r,r as e,t as $,s,n as E,h as Et,l as wt,k as Bt}from"./DsYFF3e0.js";import{a as Jt,s as dt,d as Ct}from"./D6t6EFf3.js";import{p as W,i as j}from"./Nwe5dM3j.js";import{k as B,j as pt,I as kt,S as Zt,q as Kt,h as D,i as Qt,J as Wt,t as Xt,a as $t,p as Pt,D as zt,b as te,E as ee,s as re}from"./dRtQjgBD.js";import{t as Y,s as ct,f as ae,b as se,c as nt}from"./R2QwTmpq.js";import{C as oe}from"./Cxhqr6gh.js";import{r as ie}from"./CF_rgvJJ.js";import{C as Lt}from"./ZErG5RAz.js";import{P as Tt,a as ne}from"./CUoH4DM0.js";import{f as Gt,P as Dt}from"./ChYHAxKB.js";import{C as le}from"./DcGg3-OB.js";import{R as _e}from"./D7jkYwLB.js";import{P as de,a as pe}from"./CUJcvrzd.js";import{D as ce}from"./CPf3P_HK.js";import{T as ve,E as me}from"./DtoQsrlA.js";import{r as ue,D as lt,g as _t}from"./z7712QSE.js";import{E as fe}from"./BeRhWz1w.js";function ge(u,a){Z(a,!0);const t=X(()=>a.prompt.token_count);le(u,{get token_count(){return b(t)}}),K()}const he=u=>{var a=be();o(u,a)};var be=d('<small class="font_family_mono">[no parts yet]</small>'),xe=d("<li><!></li>"),ye=d("<ul></ul>"),we=d("<li><!></li>"),ke=d("<ul></ul>");function Pe(u,a){Z(a,!0);const t=W(a,"empty",3,he),v=X(()=>a.onreorder?new _e(a.reorderable_options):null);var C=J(),x=A(C);{var f=_=>{var p=J(),h=A(p);Jt(h,t),o(_,p)},g=_=>{var p=J(),h=A(p);{var G=y=>{var n=ye();B(n,()=>({...a.attrs,class:`unstyled column gap_xs5 ${a.attrs?.class??""}`})),pt(n,23,()=>a.parts,w=>w.id,(w,H,k)=>{var P=xe();B(P,()=>({...a.item_attrs,class:`border_radius_xs ${a.item_attrs?.class??""}`}));var tt=r(P);Tt(tt,{get part(){return b(H)},get prompt(){return a.prompt}}),e(P),kt(P,()=>b(v).item({index:b(k)})),Y(3,P,()=>ct),o(w,P)}),e(n),kt(n,()=>b(v).list({onreorder:a.onreorder})),o(y,n)},R=y=>{var n=ke();B(n,()=>({...a.attrs,class:`unstyled column gap_xs5 ${a.attrs?.class??""}`})),pt(n,21,()=>a.parts,w=>w.id,(w,H)=>{var k=we();B(k,()=>({...a.item_attrs,class:`border_radius_xs ${a.item_attrs?.class??""}`}));var P=r(k);Tt(P,{get part(){return b(H)},get prompt(){return a.prompt}}),e(k),Y(3,k,()=>ct),o(w,k)}),e(n),o(y,n)};j(h,y=>{b(v)&&a.onreorder?y(G):y(R,!1)},!0)}o(_,p)};j(x,_=>{a.parts.length===0?_(f):_(g,!1)})}o(u,C),K()}var ze=d("<pre> </pre>");function Le(u,a){Z(a,!0);const t=W(a,"height",3,"200px"),v=W(a,"min_height",19,t),C=W(a,"max_height",19,t);var x=ze();B(x,g=>({...a.attrs,class:`flex_1 width_100 overflow_auto scrollbar_width_thin border_radius_xs font_family_sans font_size_sm fg_1 px_md py_xs ${a.attrs?.class??""}`,[Zt]:g}),[()=>({height:t(),"min-height":v(),"max-height":C()})]);var f=r(x,!0);e(x),$(()=>dt(f,a.content)),o(u,x),K()}var Te=d(`<div class="pt_lg"><div><aside><p>The prompt builder UI is very rough. The plan is to experiment with many ideas for making
					and managing prompts, both simpler and more complex than this first iteration. Zzz will
					likewise explore variants of the <a>chat</a> interface. Share
					your ideas in the <!>.</p> <button type="button" class="compact">okay</button></aside></div></div>`);function De(u,a){Z(a,!0);const t=Gt.get();var v=J(),C=A(v);{var x=f=>{var g=Te(),_=r(g),p=r(_),h=r(p),G=s(r(h)),R=s(G,2);fe(R,{href:"https://github.com/ryanatkn/zzz/discussions",children:(n,w)=>{E();var H=Et("discussions");o(n,H)},$$slots:{default:!0}}),E(),e(h);var y=s(h,2);y.__click=()=>{t.ui.tutorial_for_prompts=!1},e(p),e(_),e(g),$(n=>Kt(G,"href",n),[()=>ue("/chats")]),Y(2,p,()=>ae,()=>({duration:lt,y:-1,x:10})),Y(2,_,()=>se,()=>({duration:lt})),Y(2,g,()=>ct,()=>({delay:lt})),o(f,g)};j(C,f=>{t.ui.tutorial_for_prompts&&f(x)})}o(u,v),K()}Ct(["click"]);var Ee=d('<button type="button" title="toggle sort controls"><!></button>'),Ce=d('<div class="row white_space_nowrap"><!>&nbsp; remove all</div>'),Ge=d('<li><div class="bg border_radius_xs p_sm"><!></div></li>'),Re=d('<div class="column_fixed pr_sm"><section class="column_section"><div class="font_size_lg display_flex align_items_center"><!> <!></div> <div class="column"><small> </small> <small> <!></small></div> <div class="row gap_xs py_xs"><!> <div class="flex_1"><!></div> <!></div> <!></section> <section class="column_section"><header class="font_size_lg mb_lg"><!> parts</header> <!></section></div> <div class="column_fluid"><div class="column_bg_1 column gap_md p_sm"><div class="display_flex justify_content_space_between"><div class="display_flex flex_wrap_wrap gap_xs"><button type="button" class="plain font_size_sm"><div class="row white_space_nowrap"><!>&nbsp; add text</div></button> <button type="button" class="plain font_size_sm"><div class="row white_space_nowrap"><!>&nbsp; add file</div></button> <!></div></div> <ul class="unstyled display_grid gap_md"></ul></div></div>',1),Se=d('<div class="box height_100 flex_1"><p>select a prompt from the list or <button type="button" class="inline color_d">create one</button> or <button type="button" class="inline color_f">go fish</button>?</p></div>'),Ye=d('<div class="box height_100 flex_1"><p>no prompts yet, <button type="button" class="inline color_d">create a new prompt</button>?</p></div>'),He=d('<div class="display_flex width_100 height_100"><div class="column_fixed"><div class="p_sm pl_0"><div class="row gap_xs2 mb_xs pl_xs2"><button type="button" class="plain width_100 justify_content_start"><!>&nbsp; new prompt</button> <!></div> <!></div> <!> <!></div> <!></div> <!>',1);function tr(u,a){Z(a,!0);const t=Gt.get();let v=Bt(!1);const C=()=>{if(!t.prompts.selected)return;const i=Dt.create(t,{type:"text",content:""});t.prompts.selected.add_part(i)},x=()=>{t.prompts.selected&&wt(v,!0)},f=async()=>{const i=t.prompts.add();await t.prompts.navigate_to(i.id)};var g=He(),_=A(g),p=r(_),h=r(p),G=r(h),R=r(G);R.__click=f;var y=r(R);D(y,{get glyph(){return Qt}}),E(),e(R);var n=s(R,2);{var w=i=>{var m=Ee();let U;m.__click=()=>t.prompts.toggle_sort_controls();var F=r(m);D(F,{get glyph(){return Wt}}),e(m),$(I=>U=Xt(m,1,"plain compact selectable deselectable",null,U,I),[()=>({selected:t.prompts.show_sort_controls})]),o(i,m)};j(n,i=>{t.prompts.items.size>1&&i(w)})}e(G);var H=s(G,2);de(H,{}),e(h);var k=s(h,2);ve(k,{});var P=s(k,2);De(P,{}),e(p);var tt=s(p,2);{var Rt=i=>{pe(i,{get prompt(){return t.prompts.selected},children:(m,U)=>{var F=Re(),I=A(F),z=r(I),c=r(z),S=r(c);D(S,{get glyph(){return $t}});var M=s(S,2);me(M,{get value(){return t.prompts.selected.name},set value(l){t.prompts.selected.name=l}}),e(c);var N=s(c,2),V=r(N),Ht=r(V);e(V);var vt=s(V,2),mt=r(vt),It=s(mt);{var Ot=l=>{var L=Et("s");o(l,L)};j(It,l=>{t.prompts.selected.parts.length!==1&&l(Ot)})}e(vt),e(N);var et=s(N,2),ut=r(et);oe(ut,{get text(){return t.prompts.selected.content},attrs:{class:"plain"}});var rt=s(ut,2),jt=r(rt);ge(jt,{get prompt(){return t.prompts.selected}}),e(rt);var At=s(rt,2);{const l=T=>{D(T,{get glyph(){return Pt}})};let L=X(()=>'"'+t.prompts.selected.name+'"');Lt(At,{onconfirm:()=>t.prompts.selected&&t.prompts.remove(t.prompts.selected),get title(){return`delete prompt ${b(L)??""}`},class:"plain icon_button",popover_button_content:l,children:(T,O)=>{D(T,{get glyph(){return Pt}})},$$slots:{popover_button_content:!0,default:!0}})}e(et);var Ft=s(et,2);Le(Ft,{get content(){return t.prompts.selected.content}}),e(z);var ft=s(z,2),at=r(ft),Mt=r(at);D(Mt,{get glyph(){return zt}}),E(),e(at);var Ut=s(at,2);Pe(Ut,{get parts(){return t.prompts.selected.parts},get prompt(){return t.prompts.selected},onreorder:(l,L)=>{t.prompts.selected?.reorder_parts(l,L)}}),e(ft),e(I);var gt=s(I,2),ht=r(gt),st=r(ht),bt=r(st),Q=r(bt);Q.__click=C;var xt=r(Q),Nt=r(xt);D(Nt,{get glyph(){return zt}}),E(),e(xt),e(Q);var q=s(Q,2);q.__click=x;var yt=r(q),Vt=r(yt);D(Vt,{get glyph(){return te}}),E(),e(yt),e(q);var qt=s(q,2);{let l=X(()=>!t.prompts.selected.parts.length);Lt(qt,{onconfirm:()=>t.prompts.selected?.remove_all_parts(),get disabled(){return b(l)},class:"plain font_size_sm",children:(L,T)=>{var O=Ce(),it=r(O);D(it,{get glyph(){return ee}}),E(),e(O),o(L,O)},$$slots:{default:!0}})}e(bt),e(st);var ot=s(st,2);re(ot,"",{},{"grid-template-columns":"repeat(auto-fill, minmax(300px, 1fr))"}),pt(ot,21,()=>t.prompts.selected.parts,l=>l.id,(l,L)=>{var T=Ge(),O=r(T),it=r(O);ne(it,{get part(){return b(L)}}),e(O),e(T),Y(1,T,()=>nt,()=>({duration:_t})),o(l,T)}),e(ot),e(ht),e(gt),$(()=>{dt(Ht,`created ${t.prompts.selected.created_formatted_short_date??""}`),dt(mt,`${t.prompts.selected.parts.length??""}
							part`),q.disabled=!t.diskfiles.items.size}),o(m,F)},$$slots:{default:!0}})},St=i=>{var m=J(),U=A(m);{var F=z=>{var c=Se(),S=r(c),M=s(r(S));M.__click=f;var N=s(M,2);N.__click=async()=>{const V=ie(t.prompts.ordered_items);await t.prompts.navigate_to(V.id)},E(),e(S),e(c),Y(1,c,()=>nt,()=>({duration:_t})),o(z,c)},I=z=>{var c=Ye(),S=r(c),M=s(r(S));M.__click=f,E(),e(S),e(c),Y(1,c,()=>nt,()=>({duration:_t})),o(z,c)};j(U,z=>{t.prompts.items.size?z(F):z(I,!1)},!0)}o(i,m)};j(tt,i=>{t.prompts.selected?i(Rt):i(St,!1)})}e(_);var Yt=s(_,2);ce(Yt,{onpick:i=>{if(!t.prompts.selected||!i)return!1;const m=Dt.create(t,{type:"diskfile",path:i.path});return t.prompts.selected.add_part(m),!0},get show(){return b(v)},set show(i){wt(v,i,!0)}}),o(u,g),K()}Ct(["click"]);export{tr as D};
