import"./DsnmJJEf.js";import{p as N,u as R,x as e,L as u,z as d,f as A,d as _,r as p,t as L,b as D,c as S,ap as H,s as J,e as K,a as M}from"./-CpFIzHZ.js";import{o as Q,a as q,e as U,d as V}from"./DzZ7Rzvg.js";import{i as W}from"./DH5XRg4H.js";import{s as X,c as Y,b as Z}from"./trDA34-_.js";import{b as T}from"./BiJ5jRlW.js";import{p as h}from"./Rk-Dv8br.js";import{s as $,i as ee}from"./V2q5a4YM.js";import{w as te}from"./ChZWrY-Y.js";var oe=A('<div class="teleport svelte-1w7t70l"><!></div>');function ae(b,t){N(t,!0);let n=u(void 0);R(()=>{e(n)&&t.to&&E(e(n),t.to)});let g=u(!1);const E=(r,s)=>{d(g,!0),s.appendChild(r),t.onmove?.(r,s)};Q(()=>{e(n)?.parentNode?.removeChild(e(n))});var l=oe(),w=_(l);q(w,()=>t.children),p(l),T(l,r=>d(n,r),()=>e(n)),L(()=>X(l,"hidden",!e(g))),D(b,l),S()}var se=A('<div role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-8u0dsw"><div class="dialog_wrapper svelte-8u0dsw" role="none"><div class="dialog_bg svelte-8u0dsw" aria-hidden="true"></div> <div class="dialog_content svelte-8u0dsw"><!></div></div></div></div>');function fe(b,t){N(t,!0);const n=h(t,"layout",3,"centered"),g=h(t,"index",3,0),E=h(t,"active",3,!0),l=h(t,"content_selector",3,".pane"),w="body",r="fuz_dialog";let s=u(void 0);R(()=>{B(t.container)});const B=o=>{if(o)d(s,o,!0);else{const c=document.getElementById(r);if(c)d(s,c,!0);else{const a=document.querySelector(w);if(!a)throw Error(`Cannot find dialog root element with selector '${w}'`);d(s,document.createElement("div"),!0),e(s).id=r,e(s).style.display="contents",a.appendChild(e(s))}}};let y=u(void 0),m=u(void 0);const x=o=>{o&&$(o),t.onclose?.()},P=o=>{if(o.key==="Escape"&&!ee(o.target)){const c=e(y)?.parentElement,a=c?.parentElement?.children,f=Array.prototype.indexOf.call(a,c);(!a||f===a.length-1||f===-1)&&x(o)}};let C=u(!1);U("keydown",H,function(...o){(E()?P:void 0)?.apply(this,o)}),ae(b,{get to(){return e(s)},onmove:async()=>{await te(),d(C,!0),e(y)?.focus()},children:(o,c)=>{var a=se();let f,z;var I=_(a),O=_(I);O.__mousedown=i=>{const v=i.target;e(m)&&(e(m)===v||!e(m).contains(v)||l()&&!v.closest(l()))&&x(i)};var k=J(_(O),2),j=_(k);{var F=i=>{var v=K(),G=M(v);q(G,()=>t.children,()=>x),D(i,v)};W(j,i=>{e(C)&&i(F)})}p(k),T(k,i=>d(m,i),()=>e(m)),p(O),p(I),p(a),T(a,i=>d(y,i),()=>e(y)),L(()=>{f=Y(a,1,"dialog svelte-8u0dsw",null,f,{ready:e(C),layout_page:n()==="page"}),z=Z(a,"",z,{"z-index":100+g()})}),D(o,a)},$$slots:{default:!0}}),S()}V(["mousedown"]);export{fe as D};
