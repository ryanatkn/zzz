import"./DsnmJJEf.js";import{p as H,f as h,a as w,s as b,m as V,b as l,c as R,d as z,r as A,t as $,e as G,n as ce,h as _e,i as n,j as C}from"./DsYFF3e0.js";import{p as D,i as g,s as q,r as ee}from"./Nwe5dM3j.js";import{D as ue}from"./D9UsqQ5q.js";import{s as te,a as se}from"./D6t6EFf3.js";import{E as fe}from"./Bf1n2LBq.js";import{S as ve,a as W,s as P}from"./DQ5nx7sw.js";import{f as ae}from"./yYxB9JYd.js";import{h as E,b as I,p as me,E as ge,k as he,C as ke}from"./dRtQjgBD.js";import{s as X}from"./BlUH4YWX.js";import{C as ye,a as be,b as Z}from"./BROXFBhU.js";import{C as F}from"./BJgKlJ1j.js";var we=h('<h2 class="mt_lg text_align_center"> </h2>'),pe=h("<!> <!>",1);function xe(v,e){H(e,!0);const o=D(e,"sorters",3,fe),m=D(e,"show_sort_controls",3,!1),f=D(e,"heading",3,null),d=t=>{e.onpick(t)};var _=pe(),r=w(_);{var u=t=>{var a=we(),k=z(a,!0);A(a),$(()=>te(k,f())),l(t,a)};g(r,t=>{f()&&t(u)})}var i=b(r,2);ve(i,{get items(){return e.items},get filter(){return e.filter},get exclude_ids(){return e.exclude_ids},get sorters(){return o()},get sort_key_default(){return e.sort_key_default},get show_sort_controls(){return m()},get no_items(){return e.no_items},children:(a,k=V)=>{var y=G(),p=w(y);se(p,()=>e.children,k,()=>d),l(a,y)},$$slots:{default:!0}}),l(v,_),R()}var Pe=h('<div class="pane p_lg width_upto_md mx_auto"><!></div>');function Ee(v,e){H(e,!0);let o=D(e,"show",15,!1),m=ee(e,["$$slots","$$events","$$legacy","onpick","show","dialog_props"]);var f=G(),d=w(f);{var _=r=>{ue(r,q(()=>e.dialog_props,{onclose:()=>{e.onpick(void 0),o(!1)},children:(u,i)=>{var t=Pe(),a=z(t);xe(a,q(()=>m,{onpick:k=>{e.onpick(k)!==!1&&o(!1)}})),A(t),l(u,t)},$$slots:{default:!0}}))};g(d,r=>{o()&&r(_)})}l(v,f),R()}var Ce=h("<span>select tab</span>"),De=h("<span>preview tab</span>"),Le=h("<span>close tab</span>"),Se=h("<span>delete file</span>"),Ye=h("<!> <!> <!> <!> <!> <!>",1);function ze(v,e){H(e,!0);const o=i=>{var t=G(),a=w(t);{var k=y=>{const p=C(()=>{const{diskfiles:T}=e.diskfile.app;return{diskfiles:T}}),B=C(()=>{const{tabs:T}=n(p).diskfiles.editor;return{tabs:T}}),L=C(()=>n(B).tabs.by_diskfile_id.get(e.diskfile.id)),J=C(()=>e.diskfile===n(B).tabs.selected_tab?.diskfile);be(y,{icon:S=>{E(S,{get glyph(){return I}})},menu:S=>{var O=Ye(),M=w(O);{var re=s=>{F(s,{run:()=>{n(p).diskfiles.select(e.diskfile.id,!0)},icon:c=>{E(c,{get glyph(){return I}})},children:(c,j)=>{var Y=Ce();l(c,Y)},$$slots:{icon:!0,default:!0}})};g(M,s=>{(!n(J)||n(L)?.is_preview)&&s(re)})}var K=b(M,2);{var ie=s=>{F(s,{run:()=>{n(p).diskfiles.select(e.diskfile.id,!1)},icon:c=>{E(c,{get glyph(){return I}})},children:(c,j)=>{var Y=De();l(c,Y)},$$slots:{icon:!0,default:!0}})};g(K,s=>{(!n(L)||!n(J)&&n(L).is_preview)&&s(ie)})}var N=b(K,2);{var ne=s=>{F(s,{run:()=>{n(p).diskfiles.editor.close_tab(n(L).id)},icon:c=>{E(c,{get glyph(){return ge}})},children:(c,j)=>{var Y=Le();l(c,Y)},$$slots:{icon:!0,default:!0}})};g(N,s=>{n(L)&&s(ne)})}var Q=b(N,2);{var le=s=>{Z(s,{get content(){return e.diskfile.path_relative},label:"copy file path"})};g(Q,s=>{e.diskfile.path_relative&&s(le)})}var U=b(Q,2);{var oe=s=>{Z(s,{get content(){return e.diskfile.content},label:"copy file content",get preview(){return e.diskfile.content_preview}})};g(U,s=>{e.diskfile.content&&s(oe)})}var de=b(U,2);F(de,{run:async()=>{confirm(`Are you sure you want to delete ${e.diskfile.path_relative}?`)&&await f.diskfiles.delete(e.diskfile.path)},icon:x=>{E(x,{get glyph(){return me}})},children:(x,c)=>{var j=Se();l(x,j)},$$slots:{icon:!0,default:!0}}),l(S,O)},children:(S,O)=>{ce();var M=_e("file");l(S,M)},$$slots:{icon:!0,menu:!0,default:!0}})};g(a,y=>{e.diskfile&&y(k)})}l(i,t)},m=ee(e,["$$slots","$$events","$$legacy","diskfile","children"]),f=ae.get();var d=G(),_=w(d);{var r=i=>{ye(i,q(()=>m,{get entries(){return o},get children(){return e.children}}))},u=i=>{var t=G(),a=w(t);se(a,()=>e.children),l(i,t)};g(_,i=>{e.diskfile?i(r):i(u,!1)})}l(v,d),R()}var Ae=h('<div><small class="ellipsis"><!> <span class="ml_xs"> </span></small></div>');function Ge(v,e){H(e,!0);const o=D(e,"selected",3,!1);ze(v,{get diskfile(){return e.diskfile},children:(m,f)=>{var d=Ae();he(d,t=>({role:"button",tabindex:"0",class:"menu_item compact ellipsis cursor_pointer",...e.attrs,onclick:e.onselect?a=>{X(a),e.onselect(e.diskfile,a.detail===2)}:void 0,onkeydown:e.onselect?a=>{(a.key==="Enter"||a.key===" ")&&(X(a),e.onselect(e.diskfile,!0))}:void 0,"aria-label":e.diskfile.path_relative??void 0,"aria-pressed":o(),[ke]:t}),[()=>({selected:o()})]);var _=z(d),r=z(_);E(r,{get glyph(){return I}});var u=b(r,2),i=z(u,!0);A(u),A(_),A(d),$(()=>te(i,e.diskfile.path_relative)),l(m,d)},$$slots:{default:!0}}),R()}function Ne(v,e){H(e,!0);let o=D(e,"show",15,!1);const m=ae.get(),{diskfiles:f}=m;{const d=(r,u=V,i=V)=>{{let t=C(()=>!!e.selected_ids&&e.selected_ids.includes(u().id));Ge(r,{get diskfile(){return u()},get selected(){return n(t)},get onselect(){return i()}})}};let _=C(()=>[W("path_asc","path (a-z)","path"),W("path_desc","path (z-a)","path","desc"),P("created_newest","newest first","created_date","desc"),P("created_oldest","oldest first","created_date","asc"),P("updated_recently","recently updated","updated_date","desc"),P("updated_oldest","least recently updated","updated_date","asc"),P("font_size_largest","largest first","content_length","desc"),P("font_size_smallest","smallest first","content_length","asc")]);Ee(v,{get items(){return f.items.values},get onpick(){return e.onpick},get filter(){return e.filter},get exclude_ids(){return e.exclude_ids},get dialog_props(){return e.dialog_props},get sorters(){return n(_)},sort_key_default:"path_asc",show_sort_controls:!0,heading:"Pick a file",get show(){return o()},set show(r){o(r)},children:d,$$slots:{default:!0}})}R()}export{Ne as D,Ee as P,Ge as a,ze as b,xe as c};
