import"./DsnmJJEf.js";import{p as I,f as o,a as G,d as v,s as d,r as c,t as Y,b as r,c as N,$ as B,x as j,y as T,e as te,z as K,I as ae,n as re,h as se}from"./vp8LXHGR.js";import{t as oe,s as ne}from"./C_Ivq9EZ.js";import{s as E,a as de,d as ie}from"./9dtTqLgI.js";import{i as A,p as X,s as le,r as ce}from"./DBFmjg--.js";import{r as _e}from"./MxsLBdI6.js";import{N as ue}from"./4AtoPEUv.js";import{C as me,a as ve,b as Q}from"./BynhBeJ2.js";import{C as M}from"./hV2gc12w.js";import{f as J}from"./B2MgxvFj.js";import{i as L,G as F,j as pe,z as he,o as fe,x as U}from"./bNKGQNGH.js";import{P as ge}from"./DnLA9HPS.js";import{e as we}from"./CQG0N3Nc.js";import{M as ye,a as xe}from"./DXUsjVGC.js";import{a as D,S as be,s as W}from"./ByFb_0iM.js";var Pe=o("<span> </span>"),$e=o('<small class="chip font_weight_400"> </small>'),Ce=o('<ul class="unstyled display_flex flex_wrap_wrap gap_xs2"></ul>'),ke=o('<div class="font_size_md row"><!> <div class="pl_sm"><div> </div> <small class="row justify_content_space_between"><span> </span><!></small></div></div> <!>',1);function Le($,e){I(e,!0),ye($,{attrs:{class:"width_100 py_sm"},get model(){return e.model},children:(C,t)=>{var g=ke(),_=G(g),w=v(_);xe(w,{get name(){return e.model.provider_name},size:"var(--font_size_xl)"});var i=d(w,2),n=v(i),u=v(n,!0);c(n);var s=d(n,2),y=v(s),H=v(y,!0);c(y);var m=d(y);{var x=p=>{var P=Pe(),z=v(P,!0);c(P),Y(()=>E(z,e.model.context_window_formatted)),r(p,P)};A(m,p=>{e.model.context_window_formatted&&p(x)})}c(s),c(i),c(_);var l=d(_,2);{var k=p=>{var P=Ce();we(P,20,()=>e.model.tags,z=>z,(z,V)=>{var S=$e(),O=v(S,!0);c(S),Y(()=>E(O,V)),r(z,S)}),c(P),r(p,P)};A(l,p=>{e.show_tags&&e.model.tags.length&&p(k)})}Y(()=>{E(u,e.model.name),E(H,e.model.provider_name)}),r(C,g)},$$slots:{default:!0}}),N()}var ze=o('<!> <button type="button" class="listitem compact width_100"><!></button>',1);function Ee($,e){I(e,!0);const C=J.get(),{models:t}=C;let g=X(e,"show",15,!1);{const _=(i,n=B,u=B)=>{var s=ze(),y=G(s);{var H=l=>{var k=te(),p=G(k);de(p,()=>e.children),r(l,k)};A(y,l=>{e.children&&l(H)})}var m=d(y,2);m.__click=()=>u()(n());var x=v(m);Le(x,{get model(){return n()}}),c(m),r(i,s)};let w=T(()=>[D("name_asc","name (a-z)","name"),D("name_desc","name (z-a)","name","desc"),D("provider_asc","provider (a-z)","provider_name"),D("provider_desc","provider (z-a)","provider_name","desc")]);ge($,{get items(){return t.ordered_by_name},get onpick(){return e.onpick},get filter(){return e.filter},get dialog_props(){return e.dialog_props},get sorters(){return j(w)},sort_key_default:"name_asc",show_sort_controls:!0,heading:"Pick a model",get show(){return g()},set show(i){g(i)},children:_,$$slots:{default:!0}})}N()}ie(["click"]);var Ge=o("<span>add thread</span>"),He=o("<span> </span>"),Me=o("<span>remove all threads</span>"),De=o("<span>clear input</span>"),Ye=o("<!> <!>",1),je=o("<span>duplicate chat</span>"),Ae=o("<span>delete chat</span>"),Se=o("<!> <!> <!> <!> <!>  <!> <!>",1),Te=o("<!> <!>",1);function Ie($,e){I(e,!0);const C=s=>{ve(s,{icon:m=>{L(m,{get glyph(){return F}})},menu:m=>{var x=Se(),l=G(x);M(l,{run:()=>{K(w,!0)},icon:a=>{L(a,{get glyph(){return pe}})},children:(a,h)=>{var f=Ge();r(a,f)},$$slots:{icon:!0,default:!0}});var k=d(l,2);M(k,{run:()=>{t().view_mode=t().view_mode==="simple"?"multi":"simple"},icon:a=>{L(a,{get glyph(){return he}})},children:(a,h)=>{var f=He(),R=v(f);c(f),Y(()=>E(R,`${t().view_mode==="simple"?"multi":"simple"} view`)),r(a,f)},$$slots:{icon:!0,default:!0}});var p=d(k,2);Q(p,{get content(){return t().id},label:"copy id"});var P=d(p,2);{var z=b=>{M(b,{run:()=>t().remove_all_threads(),icon:h=>{L(h,{get glyph(){return U}})},children:(h,f)=>{var R=Me();r(h,R)},$$slots:{icon:!0,default:!0}})};A(P,b=>{t().threads.length&&b(z)})}var V=d(P,2);{var S=b=>{var a=Ye(),h=G(a);Q(h,{get content(){return t().main_input},label:"copy input",preview_limit:30});var f=d(h,2);M(f,{run:()=>{t().main_input=""},icon:q=>{L(q,{get glyph(){return U}})},children:(q,We)=>{var ee=De();r(q,ee)},$$slots:{icon:!0,default:!0}}),r(b,a)};A(V,b=>{t().main_input&&b(S)})}var O=d(V,2);M(O,{run:async()=>{const a=_.chats.add_chat(t().clone());for(const h of t().threads)a.add_thread(h.model);await _.chats.navigate_to(a.id)},icon:a=>{L(a,{get glyph(){return F}})},children:(a,h)=>{var f=je();r(a,f)},$$slots:{icon:!0,default:!0}});var Z=d(O,2);M(Z,{run:()=>{confirm(`Are you sure you want to delete the chat "${t().name}"?`)&&_.chats.remove(t().id)},icon:a=>{L(a,{get glyph(){return fe}})},children:(a,h)=>{var f=Ae();r(a,f)},$$slots:{icon:!0,default:!0}}),r(m,x)},children:(m,x)=>{re();var l=se("chat");r(m,l)},$$slots:{icon:!0,menu:!0,default:!0}})},t=X(e,"chat",7),g=ce(e,["$$slots","$$events","$$legacy","chat"]),_=J.get();let w=ae(!1);var i=Te(),n=G(i);me(n,le(()=>g,{get entries(){return C}}));var u=d(n,2);Ee(u,{onpick:s=>{s&&t().add_thread(s)},get show(){return j(w)},set show(s){K(w,s,!0)}}),r($,i),N()}var Ne=o("<small> </small>"),Ve=o('<div class="ellipsis"><!>&nbsp; <span> </span></div> <!>',1);function Oe($,e){I(e,!0),Ie($,{get chat(){return e.chat},children:(C,t)=>{{let g=T(()=>_e(`/chats/${e.chat.id}`));ue(C,{get href(){return j(g)},get selected(){return e.selected},class:"justify_content_space_between",style:"min-height: 0;",children:(_,w)=>{var i=Ve(),n=G(i),u=v(n);L(u,{get glyph(){return F}});var s=d(u,2),y=v(s,!0);c(s),c(n);var H=d(n,2);{var m=x=>{var l=Ne(),k=v(l,!0);c(l),Y(()=>E(k,e.chat.threads.length)),r(x,l)};A(H,x=>{e.chat.threads.length&&x(m)})}Y(()=>E(y,e.chat.name)),r(_,i)},$$slots:{default:!0}})}},$$slots:{default:!0}}),N()}var Re=o("<div><!></div>");function nt($,e){I(e,!0);const C=J.get(),{chats:t}=C,g=T(()=>t.selected_id);{const _=(i,n=B)=>{var u=Re(),s=v(u);{let y=T(()=>n().id===j(g));Oe(s,{get chat(){return n()},get selected(){return j(y)}})}c(u),oe(3,u,()=>ne),r(i,u)};let w=T(()=>[W("updated_newest","updated (latest)","updated","desc"),W("updated_oldest","updated (past)","updated","asc"),W("created_newest","created (newest)","created","desc"),W("created_oldest","created (oldest)","created","asc"),D("name_asc","name (a-z)","name"),D("name_desc","name (z-a)","name","desc")]);be($,{get items(){return t.ordered_items},get show_sort_controls(){return t.show_sort_controls},get sorters(){return j(w)},sort_key_default:"updated_newest",children:_,$$slots:{default:!0}})}N()}export{nt as C,Ee as M,Le as a,Ie as b};
