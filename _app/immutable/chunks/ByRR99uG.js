import"./DsnmJJEf.js";import{p as H,f as P,d as c,s as r,x as f,y as C,r as m,t as z,b as x,c as Y,n as j,e as at,a as V,L as rt,h as q,z as J}from"./-CpFIzHZ.js";import{d as U,s as X}from"./DzZ7Rzvg.js";import{r as S,c as D,g as K,e as nt,s as N,b as st}from"./trDA34-_.js";import{P as W,a as Z,b as lt,g as I,c as ot,d as it,e as dt}from"./DHLbzt6_.js";import{i as L,x as _t,j as ut,r as mt,w as vt,B as ct,o as pt}from"./CIQxfFOX.js";import{i as F}from"./DH5XRg4H.js";import{p as M,s as gt,r as ft}from"./Rk-Dv8br.js";import{C as ht,a as xt,b as bt}from"./giexsI9c.js";import{C as Q}from"./DSUJ41bw.js";import{D as yt}from"./B3Tu39mr.js";import{f as $}from"./BSiHsYWh.js";import{t as Pt,s as wt}from"./D7AV01aJ.js";import{c as kt,b as Ct}from"./DUXOEpA9.js";import{b as Et}from"./BiJ5jRlW.js";import{C as Lt}from"./CzpPG80D.js";var Tt=P('<div><input placeholder="key"/> <input placeholder="value"/> <!></div>');function Dt(w,t){H(t,!0);const e=C(()=>t.dormant||!t.attribute.key);var a=Tt();let b;var g=c(a);S(g);let u;g.__input=s=>t.onupdate({key:s.currentTarget.value});var n=r(g,2);S(n);let i;n.__input=s=>t.onupdate({value:s.currentTarget.value});var h=r(n,2);{let s=C(()=>t.attribute.key||"");Lt(h,{get onconfirm(){return t.onremove},get title(){return`remove attribute ${f(s)??""}`},class:"plain compact",children:(p,y)=>{L(p,{get glyph(){return _t}})},$$slots:{default:!0}})}m(a),z(()=>{b=D(a,1,"display_flex gap_xs2 align_items_center",null,b,{dormant_wrapper:!t.attribute.key}),u=D(g,1,"plain compact",null,u,{dormant:f(e)}),K(g,t.attribute.key),i=D(n,1,"plain compact",null,i,{dormant:f(e)}),K(n,t.attribute.value)}),x(w,a),Y()}U(["input"]);var Gt=P('<li class="py_xs4"><!></li>'),Ht=P('<div class="column gap_xs"><div class="display_flex align_items_center gap_xs2"><label class="row mb_0 pr_md"><input class="plain compact" type="checkbox"/> <small>xml tag</small></label> <input/> <button type="button" class="plain compact" title="add xml attribute"><!></button></div> <ul class="unstyled"></ul></div>');function zt(w,t){H(t,!0);const e=M(t,"part",7);let a;var b=Ht(),g=c(b),u=c(g),n=c(u);S(n),j(2),m(u);var i=r(u,2);S(i);let h;Et(i,d=>a=d,()=>a);var s=r(i,2);s.__click=()=>e().add_attribute();var p=c(s);L(p,{get glyph(){return ut}}),m(s),m(g);var y=r(g,2);nt(y,21,()=>e().attributes,d=>d.id,(d,l)=>{var o=Gt(),v=c(o);{let E=C(()=>!e().has_xml_tag);Dt(v,{get attribute(){return f(l)},get dormant(){return f(E)},onupdate:T=>e().update_attribute(f(l).id,T),onremove:()=>e().remove_attribute(f(l).id)})}m(o),Pt(3,o,()=>wt),x(d,o)}),m(y),m(b),z(()=>{N(u,"title",`when enabled, the prompt's content will be wrapped with the xml tag '${(e().xml_tag_name||e().xml_tag_name_default)??""}'`),h=D(i,1,"plain flex_1 compact",null,h,{dormant:!e().has_xml_tag}),N(i,"placeholder",e().has_xml_tag?mt+" "+e().xml_tag_name_default:void 0)}),kt(n,()=>e().has_xml_tag,d=>{e().has_xml_tag=d,d&&a?.focus()}),Ct(i,()=>e().xml_tag_name,d=>e().xml_tag_name=d),x(w,b),Y()}U(["click"]);var Yt=P('<div><div class="display_flex mb_0 justify_content_space_between"><div class="font_size_lg m_0"><!> </div> <div class="display_flex gap_xs"><!> <!></div></div> <div><!></div> <!> <!></div>');function At(w,t){H(t,!0);const e=M(t,"show_actions",3,!0),a=$.get(),{prompts:b}=a;tt(w,{get part(){return t.part},children:(g,u)=>{var n=Yt();let i;var h=c(n),s=c(h),p=c(s);{let _=C(()=>I(t.part));L(p,{get glyph(){return f(_)}})}var y=r(p);m(s);var d=r(s,2),l=c(d);W(l,{get part(){return t.part}});var o=r(l,2);Z(o,{get part(){return t.part},get prompts(){return b}}),m(d),m(h);var v=r(h,2),E=c(v);{var T=_=>{ot(_,{get text_part(){return t.part},get show_actions(){return e()}})},A=_=>{var R=at(),G=V(R);{var et=O=>{it(O,{get diskfile_part(){return t.part},get show_actions(){return e()}})};F(G,O=>{t.part.type==="diskfile"&&O(et)},!0)}x(_,R)};F(E,_=>{t.part.type==="text"?_(T):_(A,!1)})}m(v);var B=r(v,2);lt(B,{get part(){return t.part}});var k=r(B,2);zt(k,{get part(){return t.part}}),m(n),z(()=>{i=D(n,1,"column gap_sm",null,i,{dormant:!t.part.enabled}),X(y,` 
				${t.part.name??""}`)}),x(g,n)},$$slots:{default:!0}}),Y()}var Bt=P("<span>edit part</span>"),Rt=P("<span>delete part</span>"),jt=P("<!> <!> <!> <!>",1),St=P('<div class="pane p_md width_upto_md mx_auto"><h2 class="mt_0 mb_sm"><!> edit part</h2> <!></div>'),Ft=P("<!> <!>",1);function tt(w,t){H(t,!0);const e=p=>{xt(p,{icon:l=>{j();var o=q();z(v=>X(o,v),[()=>I(a())]),x(l,o)},menu:l=>{var o=jt(),v=V(o);{var E=k=>{{let _=C(()=>a().content_preview??void 0);bt(k,{get content(){return a().content},label:"copy content",get preview(){return f(_)}})}};F(v,k=>{a().content!==null&&a().content!==void 0&&k(E)})}var T=r(v,2);dt(T,{label:"part",get enabled(){return a().enabled},set enabled(k){a().enabled=k}});var A=r(T,2);Q(A,{run:()=>{J(u,!0)},icon:_=>{L(_,{get glyph(){return ct}})},children:(_,R)=>{var G=Bt();x(_,G)},$$slots:{icon:!0,default:!0}});var B=r(A,2);Q(B,{run:()=>{confirm(`Are you sure you want to delete this part "${a().name||"unnamed"}"?`)&&g.parts.remove(a().id)},icon:_=>{L(_,{get glyph(){return pt}})},children:(_,R)=>{var G=Rt();x(_,G)},$$slots:{icon:!0,default:!0}}),x(l,o)},children:(l,o)=>{j();var v=q("part");x(l,v)},$$slots:{icon:!0,menu:!0,default:!0}})},a=M(t,"part",7),b=ft(t,["$$slots","$$events","$$legacy","part"]),g=$.get();let u=rt(!1);var n=Ft(),i=V(n);ht(i,gt(()=>b,{get entries(){return e}}));var h=r(i,2);{var s=p=>{yt(p,{onclose:()=>J(u,!1),children:(y,d)=>{var l=St(),o=c(l),v=c(o);L(v,{get glyph(){return vt}}),j(),m(o);var E=r(o,2);At(E,{get part(){return a()}}),m(l),x(y,l)},$$slots:{default:!0}})};F(h,p=>{f(u)&&p(s)})}x(w,n),Y()}var Ot=P('<div><div class="progress_bar svelte-8z2t8a"></div> <div class="flex_1 pl_sm py_xs3 ellipsis"><!> </div> <div class="controls display_flex gap_xs2 svelte-8z2t8a"><!> <!></div></div>');function re(w,t){H(t,!0);const e=C(()=>t.part.enabled?t.part.length:0),a=C(()=>f(e)&&t.prompt?.length?f(e)/t.prompt.length*100:0);tt(w,{get part(){return t.part},children:(b,g)=>{var u=Ot();let n;var i=c(u);let h;var s=r(i,2),p=c(s);{let v=C(()=>I(t.part));L(p,{get glyph(){return f(v)}})}var y=r(p);m(s);var d=r(s,2),l=c(d);W(l,{get part(){return t.part}});var o=r(l,2);Z(o,{get part(){return t.part},get prompt(){return t.prompt}}),m(d),m(u),z(()=>{n=D(u,1,"part_summary display_flex justify_content_space_between gap_xs2 font_size_sm position_relative panel svelte-8z2t8a",null,n,{dormant:!t.part.enabled}),h=st(i,"",h,{width:`${f(a)??""}%`}),X(y,` 
			${t.part.name??""}
			${t.part.content_preview??""}`)}),x(b,u)},$$slots:{default:!0}}),Y()}export{re as P,At as a};
