import"./DsnmJJEf.js";import{p as H,f as a,a as D,s as c,l as z,i as $,k as B,b as s,c as Y,n as J,h as K,d as C,t as A,j as E,r as G,m as Q}from"./DsYFF3e0.js";import{t as U,s as W}from"./R2QwTmpq.js";import{s as N}from"./D6t6EFf3.js";import{s as X,r as Z,i as M}from"./Nwe5dM3j.js";import{r as tt}from"./23rF6zAW.js";import{N as et}from"./p2oupcK6.js";import{h as g,a as O,D as rt,b as st,p as at,E as ot}from"./dRtQjgBD.js";import{C as nt,a as it,b as pt}from"./BOnXaL-G.js";import{C as k}from"./D13cgyHG.js";import{f as F,P as R}from"./S68OugPJ.js";import{D as lt}from"./Lc9_QEHS.js";import{S as mt,s as S,a as j}from"./B3XsEAWC.js";var ct=a("<span>add text part</span>"),dt=a("<span>add file part</span>"),_t=a("<span>remove all parts</span>"),ut=a("<span>delete prompt</span>"),ft=a("<!> <!> <!> <!> <!>",1),vt=a("<!> <!>",1);function gt(h,t){H(t,!0);const P=e=>{it(e,{icon:m=>{g(m,{get glyph(){return O}})},menu:m=>{var b=ft(),i=D(b);pt(i,{get content(){return t.prompt.content},label:"copy content",get preview(){return t.prompt.content_preview}});var _=c(i,2);k(_,{run:()=>{t.prompt.add_part(R.create(o,{type:"text",content:""}))},icon:r=>{g(r,{get glyph(){return rt}})},children:(r,f)=>{var v=ct();s(r,v)},$$slots:{icon:!0,default:!0}});var L=c(_,2);k(L,{run:()=>{if(!o.diskfiles.items.size){alert("No files available. Add files first.");return}z(p,!0)},icon:r=>{g(r,{get glyph(){return st}})},children:(r,f)=>{var v=dt();s(r,v)},$$slots:{icon:!0,default:!0}});var T=c(L,2);{var I=u=>{k(u,{run:()=>t.prompt.remove_all_parts(),icon:f=>{g(f,{get glyph(){return ot}})},children:(f,v)=>{var q=_t();s(f,q)},$$slots:{icon:!0,default:!0}})};M(T,u=>{t.prompt.parts.length&&u(I)})}var V=c(T,2);k(V,{run:()=>{confirm(`Are you sure you want to delete prompt "${t.prompt.name}"?`)&&o.prompts.remove(t.prompt)},icon:r=>{g(r,{get glyph(){return at}})},children:(r,f)=>{var v=ut();s(r,v)},$$slots:{icon:!0,default:!0}}),s(m,b)},children:(m,b)=>{J();var i=K("prompt");s(m,i)},$$slots:{icon:!0,menu:!0,default:!0}})},d=Z(t,["$$slots","$$events","$$legacy","prompt"]),o=F.get();let p=B(!1);var y=vt(),l=D(y);nt(l,X(()=>d,{get entries(){return P}}));var n=c(l,2);lt(n,{onpick:e=>e?(t.prompt.add_part(R.create(o,{type:"diskfile",path:e.path})),!0):!1,get show(){return $(p)},set show(e){z(p,e,!0)}}),s(h,y),Y()}var ht=a("<small> </small>"),Pt=a('<div class="ellipsis"><!> <span> </span></div> <!>',1);function yt(h,t){H(t,!0),gt(h,{get prompt(){return t.prompt},children:(P,d)=>{{let o=E(()=>tt(`/prompts/${t.prompt.id}`));et(P,{get href(){return $(o)},get selected(){return t.selected},class:"justify_content_space_between",style:"min-height: 0;",children:(p,y)=>{var l=Pt(),n=D(l),e=C(n);g(e,{get glyph(){return O},class:"mr_xs2"});var x=c(e,2),w=C(x,!0);G(x),G(n);var m=c(n,2);{var b=i=>{var _=ht(),L=C(_,!0);G(_),A(()=>N(L,t.prompt.parts.length)),s(i,_)};M(m,i=>{t.prompt.parts.length&&i(b)})}A(()=>N(w,t.prompt.name)),s(p,l)},$$slots:{default:!0}})}},$$slots:{default:!0}}),Y()}var xt=a("<div><!></div>");function At(h,t){H(t,!0);const P=F.get(),{prompts:d}=P,o=E(()=>d.selected_id);{const p=(l,n=Q)=>{var e=xt(),x=C(e);{let w=E(()=>n().id===$(o));yt(x,{get prompt(){return n()},get selected(){return $(w)}})}G(e),U(3,e,()=>W),s(l,e)};let y=E(()=>[S("created_newest","created (newest)","created","desc"),S("created_oldest","created (oldest)","created","asc"),j("name_asc","name (a-z)","name"),j("name_desc","name (z-a)","name","desc")]);mt(h,{get items(){return d.ordered_items},get show_sort_controls(){return d.show_sort_controls},get sorters(){return $(y)},sort_key_default:"updated_newest",no_items:"",children:p,$$slots:{default:!0}})}Y()}export{At as P,gt as a};
