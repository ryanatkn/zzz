import"./DsnmJJEf.js";import{p as Y,f as o,a as H,s as c,z as T,x as w,L as B,b as s,c as z,n as J,h as K,d as C,t as A,y as E,r as G,a2 as Q}from"./-CpFIzHZ.js";import{t as U,s as W}from"./D7AV01aJ.js";import{s as N}from"./DzZ7Rzvg.js";import{i as O}from"./DH5XRg4H.js";import{r as X}from"./DUsYCsk8.js";import{N as Z}from"./DNKP2DNv.js";import{i as g,a as j,w as tt,b as et,o as rt,x as st}from"./CIQxfFOX.js";import{s as ot,r as at}from"./Rk-Dv8br.js";import{C as nt,a as it,b as pt}from"./giexsI9c.js";import{C as k}from"./DSUJ41bw.js";import{f as F,P as R}from"./BSiHsYWh.js";import{D as lt}from"./CIDXvkYb.js";import{S as mt,s as S,a as M}from"./CvyRc-fS.js";var ct=o("<span>add text part</span>"),dt=o("<span>add file part</span>"),ut=o("<span>remove all parts</span>"),_t=o("<span>delete prompt</span>"),ft=o("<!> <!> <!> <!> <!>",1),vt=o("<!> <!>",1);function gt(h,t){Y(t,!0);const y=e=>{it(e,{icon:m=>{g(m,{get glyph(){return j}})},menu:m=>{var b=ft(),i=H(b);pt(i,{get content(){return t.prompt.content},label:"copy content",get preview(){return t.prompt.content_preview}});var u=c(i,2);k(u,{run:()=>{t.prompt.add_part(R.create(a,{type:"text",content:""}))},icon:r=>{g(r,{get glyph(){return tt}})},children:(r,f)=>{var v=ct();s(r,v)},$$slots:{icon:!0,default:!0}});var L=c(u,2);k(L,{run:()=>{if(!a.diskfiles.items.size){alert("No files available. Add files first.");return}T(p,!0)},icon:r=>{g(r,{get glyph(){return et}})},children:(r,f)=>{var v=dt();s(r,v)},$$slots:{icon:!0,default:!0}});var D=c(L,2);{var I=_=>{k(_,{run:()=>t.prompt.remove_all_parts(),icon:f=>{g(f,{get glyph(){return st}})},children:(f,v)=>{var q=ut();s(f,q)},$$slots:{icon:!0,default:!0}})};O(D,_=>{t.prompt.parts.length&&_(I)})}var V=c(D,2);k(V,{run:()=>{confirm(`Are you sure you want to delete prompt "${t.prompt.name}"?`)&&a.prompts.remove(t.prompt)},icon:r=>{g(r,{get glyph(){return rt}})},children:(r,f)=>{var v=_t();s(r,v)},$$slots:{icon:!0,default:!0}}),s(m,b)},children:(m,b)=>{J();var i=K("prompt");s(m,i)},$$slots:{icon:!0,menu:!0,default:!0}})},d=at(t,["$$slots","$$events","$$legacy","prompt"]),a=F.get();let p=B(!1);var P=vt(),l=H(P);nt(l,ot(()=>d,{get entries(){return y}}));var n=c(l,2);lt(n,{onpick:e=>e?(t.prompt.add_part(R.create(a,{type:"diskfile",path:e.path})),!0):!1,get show(){return w(p)},set show(e){T(p,e,!0)}}),s(h,P),z()}var ht=o("<small> </small>"),yt=o('<div class="ellipsis"><!> <span> </span></div> <!>',1);function Pt(h,t){Y(t,!0),gt(h,{get prompt(){return t.prompt},children:(y,d)=>{{let a=E(()=>X(`/prompts/${t.prompt.id}`));Z(y,{get href(){return w(a)},get selected(){return t.selected},class:"justify_content_space_between",style:"min-height: 0;",children:(p,P)=>{var l=yt(),n=H(l),e=C(n);g(e,{get glyph(){return j},class:"mr_xs2"});var x=c(e,2),$=C(x,!0);G(x),G(n);var m=c(n,2);{var b=i=>{var u=ht(),L=C(u,!0);G(u),A(()=>N(L,t.prompt.parts.length)),s(i,u)};O(m,i=>{t.prompt.parts.length&&i(b)})}A(()=>N($,t.prompt.name)),s(p,l)},$$slots:{default:!0}})}},$$slots:{default:!0}}),z()}var xt=o("<div><!></div>");function Nt(h,t){Y(t,!0);const y=F.get(),{prompts:d}=y,a=E(()=>d.selected_id);{const p=(l,n=Q)=>{var e=xt(),x=C(e);{let $=E(()=>n().id===w(a));Pt(x,{get prompt(){return n()},get selected(){return w($)}})}G(e),U(3,e,()=>W),s(l,e)};let P=E(()=>[S("created_newest","created (newest)","created","desc"),S("created_oldest","created (oldest)","created","asc"),M("name_asc","name (a-z)","name"),M("name_desc","name (z-a)","name","desc")]);mt(h,{get items(){return d.ordered_items},get show_sort_controls(){return d.show_sort_controls},get sorters(){return w(P)},sort_key_default:"updated_newest",no_items:"",children:p,$$slots:{default:!0}})}z()}export{Nt as P,gt as a};
