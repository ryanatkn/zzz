import"./DsnmJJEf.js";import{p as N,u as R,x as e,I as u,z as d,f as A,d as _,r as p,t as S,b as D,c as q,ap as H,s as J,e as K,a as M}from"./vp8LXHGR.js";import{o as Q,a as B,e as U,d as V}from"./pja_h9dl.js";import{p as h,i as W}from"./Dl5udER_.js";import{s as X,c as Y,b as Z}from"./Bs1WACQy.js";import{b as I}from"./CMd_zdKF.js";import{s as $,i as ee}from"./V2q5a4YM.js";import{w as te}from"./ChZWrY-Y.js";var ae=A('<div class="teleport svelte-1w7t70l"><!></div>');function oe(b,t){N(t,!0);let n=u(void 0);R(()=>{e(n)&&t.to&&E(e(n),t.to)});let g=u(!1);const E=(r,s)=>{d(g,!0),s.appendChild(r),t.onmove?.(r,s)};Q(()=>{e(n)?.parentNode?.removeChild(e(n))});var l=ae(),w=_(l);B(w,()=>t.children),p(l),I(l,r=>d(n,r),()=>e(n)),S(()=>X(l,"hidden",!e(g))),D(b,l),q()}var se=A('<div role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-8u0dsw"><div class="dialog_wrapper svelte-8u0dsw" role="none"><div class="dialog_bg svelte-8u0dsw" aria-hidden="true"></div> <div class="dialog_content svelte-8u0dsw"><!></div></div></div></div>');function fe(b,t){N(t,!0);const n=h(t,"layout",3,"centered"),g=h(t,"index",3,0),E=h(t,"active",3,!0),l=h(t,"content_selector",3,".pane"),w="body",r="fuz_dialog";let s=u(void 0);R(()=>{L(t.container)});const L=a=>{if(a)d(s,a,!0);else{const c=document.getElementById(r);if(c)d(s,c,!0);else{const o=document.querySelector(w);if(!o)throw Error(`Cannot find dialog root element with selector '${w}'`);d(s,document.createElement("div"),!0),e(s).id=r,e(s).style.display="contents",o.appendChild(e(s))}}};let y=u(void 0),f=u(void 0);const x=a=>{a&&$(a),t.onclose?.()},P=a=>{if(a.key==="Escape"&&!ee(a.target)){const c=e(y)?.parentElement,o=c?.parentElement?.children,m=Array.prototype.indexOf.call(o,c);(!o||m===o.length-1||m===-1)&&x(a)}};let C=u(!1);U("keydown",H,function(...a){(E()?P:void 0)?.apply(this,a)}),oe(b,{get to(){return e(s)},onmove:async()=>{await te(),d(C,!0),e(y)?.focus()},children:(a,c)=>{var o=se();let m,T;var z=_(o),O=_(z);O.__mousedown=i=>{const v=i.target;e(f)&&(e(f)===v||!e(f).contains(v)||l()&&!v.closest(l()))&&x(i)};var k=J(_(O),2),j=_(k);{var F=i=>{var v=K(),G=M(v);B(G,()=>t.children,()=>x),D(i,v)};W(j,i=>{e(C)&&i(F)})}p(k),I(k,i=>d(f,i),()=>e(f)),p(O),p(z),p(o),I(o,i=>d(y,i),()=>e(y)),S(()=>{m=Y(o,1,"dialog svelte-8u0dsw",null,m,{ready:e(C),layout_page:n()==="page"}),T=Z(o,"",T,{"z-index":100+g()})}),D(a,o)},$$slots:{default:!0}}),q()}V(["mousedown"]);export{fe as D};
