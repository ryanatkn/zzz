import"./DsnmJJEf.js";import{p as H,f as w,d as p,s as l,i as h,j as C,r as m,t as Y,b as x,c as A,n as S,e as at,a as O,k as rt,h as I,l as J}from"./DsYFF3e0.js";import{d as U,s as V}from"./D6t6EFf3.js";import{r as z,h as L,E as nt,t as D,L as K,i as lt,j as st,q as N,w as ot,D as it,M as _t,p as dt,s as ut}from"./dRtQjgBD.js";import{P as W,a as Z,b as vt,g as X,c as ct,d as mt,e as pt}from"./BGlSaKyn.js";import{p as q,i as F,s as gt,r as ft}from"./Nwe5dM3j.js";import{C as ht,a as bt,b as xt}from"./BWgeLqTK.js";import{C as Q}from"./DR56upuO.js";import{D as yt}from"./BzmuMTV3.js";import{f as $}from"./DPkzVgCT.js";import{t as Pt,s as wt}from"./R2QwTmpq.js";import{c as kt,b as Et}from"./CNYcfd7V.js";import{b as Ct}from"./BwYh6stK.js";import{C as Lt}from"./Dc6PNFVQ.js";var Tt=(g,t)=>t.onupdate({key:g.currentTarget.value}),Dt=(g,t)=>t.onupdate({value:g.currentTarget.value}),Gt=w('<div><input placeholder="key"/> <input placeholder="value"/> <!></div>');function Ht(g,t){H(t,!0);const e=C(()=>t.dormant||!t.attribute.key);var a=Gt();let y;var f=p(a);z(f);let u;f.__input=[Tt,t];var s=l(f,2);z(s);let _;s.__input=[Dt,t];var b=l(s,2);{let v=C(()=>t.attribute.key||"");Lt(b,{get onconfirm(){return t.onremove},get title(){return`remove attribute ${h(v)??""}`},class:"plain compact",children:(c,P)=>{L(c,{get glyph(){return nt}})},$$slots:{default:!0}})}m(a),Y((v,c,P)=>{y=D(a,1,"display_flex gap_xs2 align_items_center",null,y,v),u=D(f,1,"plain compact",null,u,c),K(f,t.attribute.key),_=D(s,1,"plain compact",null,_,P),K(s,t.attribute.value)},[()=>({dormant_wrapper:!t.attribute.key}),()=>({dormant:h(e)}),()=>({dormant:h(e)})]),x(g,a),A()}U(["input"]);var Yt=(g,t)=>t().add_attribute(),At=w('<li class="py_xs4"><!></li>'),jt=w('<div class="column gap_xs"><div class="display_flex align_items_center gap_xs2"><label class="row mb_0 pr_md"><input class="plain compact" type="checkbox"/> <small>xml tag</small></label> <input/> <button type="button" class="plain compact" title="add xml attribute"><!></button></div> <ul class="unstyled"></ul></div>');function Rt(g,t){H(t,!0);const e=q(t,"part",7);let a;var y=jt(),f=p(y),u=p(f),s=p(u);z(s),S(2),m(u);var _=l(u,2);z(_);let b;Ct(_,r=>a=r,()=>a);var v=l(_,2);v.__click=[Yt,e];var c=p(v);L(c,{get glyph(){return lt}}),m(v),m(f);var P=l(f,2);st(P,21,()=>e().attributes,r=>r.id,(r,o)=>{var i=At(),d=p(i);{let k=C(()=>!e().has_xml_tag);Ht(d,{get attribute(){return h(o)},get dormant(){return h(k)},onupdate:T=>e().update_attribute(h(o).id,T),onremove:()=>e().remove_attribute(h(o).id)})}m(i),Pt(3,i,()=>wt),x(r,i)}),m(P),m(y),Y(r=>{N(u,"title",`when enabled, the prompt's content will be wrapped with the xml tag '${(e().xml_tag_name||e().xml_tag_name_default)??""}'`),b=D(_,1,"plain flex_1 compact",null,b,r),N(_,"placeholder",e().has_xml_tag?ot+" "+e().xml_tag_name_default:void 0)},[()=>({dormant:!e().has_xml_tag})]),kt(s,()=>e().has_xml_tag,r=>{e().has_xml_tag=r,r&&a?.focus()}),Et(_,()=>e().xml_tag_name,r=>e().xml_tag_name=r),x(g,y),A()}U(["click"]);var Bt=w('<div><div class="display_flex mb_0 justify_content_space_between"><div class="font_size_lg m_0"><!> </div> <div class="display_flex gap_xs"><!> <!></div></div> <div><!></div> <!> <!></div>');function St(g,t){H(t,!0);const e=q(t,"show_actions",3,!0),a=$.get(),{prompts:y}=a;tt(g,{get part(){return t.part},children:(f,u)=>{var s=Bt();let _;var b=p(s),v=p(b),c=p(v);{let n=C(()=>X(t.part));L(c,{get glyph(){return h(n)}})}var P=l(c);m(v);var r=l(v,2),o=p(r);W(o,{get part(){return t.part}});var i=l(o,2);Z(i,{get part(){return t.part},get prompts(){return y}}),m(r),m(b);var d=l(b,2),k=p(d);{var T=n=>{ct(n,{get text_part(){return t.part},get show_actions(){return e()}})},j=n=>{var B=at(),G=O(B);{var et=M=>{mt(M,{get diskfile_part(){return t.part},get show_actions(){return e()}})};F(G,M=>{t.part.type==="diskfile"&&M(et)},!0)}x(n,B)};F(k,n=>{t.part.type==="text"?n(T):n(j,!1)})}m(d);var R=l(d,2);vt(R,{get part(){return t.part}});var E=l(R,2);Rt(E,{get part(){return t.part}}),m(s),Y(n=>{_=D(s,1,"column gap_sm",null,_,n),V(P,` 
				${t.part.name??""}`)},[()=>({dormant:!t.part.enabled})]),x(f,s)},$$slots:{default:!0}}),A()}var zt=w("<span>edit part</span>"),Ft=w("<span>delete part</span>"),Mt=w("<!> <!> <!> <!>",1),Ot=w('<div class="pane p_md width_upto_md mx_auto"><h2 class="mt_0 mb_sm"><!> edit part</h2> <!></div>'),Vt=w("<!> <!>",1);function tt(g,t){H(t,!0);const e=c=>{bt(c,{icon:o=>{S();var i=I();Y(d=>V(i,d),[()=>X(a())]),x(o,i)},menu:o=>{var i=Mt(),d=O(i);{var k=E=>{{let n=C(()=>a().content_preview??void 0);xt(E,{get content(){return a().content},label:"copy content",get preview(){return h(n)}})}};F(d,E=>{a().content!==null&&a().content!==void 0&&E(k)})}var T=l(d,2);pt(T,{label:"part",get enabled(){return a().enabled},set enabled(E){a().enabled=E}});var j=l(T,2);Q(j,{run:()=>J(u,!0),icon:n=>{L(n,{get glyph(){return _t}})},children:(n,B)=>{var G=zt();x(n,G)},$$slots:{icon:!0,default:!0}});var R=l(j,2);Q(R,{run:()=>{confirm(`Are you sure you want to delete this part "${a().name||"unnamed"}"?`)&&f.parts.remove(a().id)},icon:n=>{L(n,{get glyph(){return dt}})},children:(n,B)=>{var G=Ft();x(n,G)},$$slots:{icon:!0,default:!0}}),x(o,i)},children:(o,i)=>{S();var d=I("part");x(o,d)},$$slots:{icon:!0,menu:!0,default:!0}})},a=q(t,"part",7),y=ft(t,["$$slots","$$events","$$legacy","part"]),f=$.get();let u=rt(!1);var s=Vt(),_=O(s);ht(_,gt(()=>y,{get entries(){return e}}));var b=l(_,2);{var v=c=>{yt(c,{onclose:()=>J(u,!1),children:(P,r)=>{var o=Ot(),i=p(o),d=p(i);L(d,{get glyph(){return it}}),S(),m(i);var k=l(i,2);St(k,{get part(){return a()}}),m(o),x(P,o)},$$slots:{default:!0}})};F(b,c=>{h(u)&&c(v)})}x(g,s),A()}var Xt=w('<div><div class="progress_bar svelte-gl8fv5"></div> <div class="flex_1 pl_sm py_xs3 ellipsis"><!> </div> <div class="controls display_flex gap_xs2 svelte-gl8fv5"><!> <!></div></div>');function ne(g,t){H(t,!0);const e=C(()=>t.part.enabled?t.part.length:0),a=C(()=>h(e)&&t.prompt?.length?h(e)/t.prompt.length*100:0);tt(g,{get part(){return t.part},children:(y,f)=>{var u=Xt();let s;var _=p(u);let b;var v=l(_,2),c=p(v);{let d=C(()=>X(t.part));L(c,{get glyph(){return h(d)}})}var P=l(c);m(v);var r=l(v,2),o=p(r);W(o,{get part(){return t.part}});var i=l(o,2);Z(i,{get part(){return t.part},get prompt(){return t.prompt}}),m(r),m(u),Y((d,k)=>{s=D(u,1,"part_summary display_flex justify_content_space_between gap_xs2 font_size_sm position_relative panel svelte-gl8fv5",null,s,d),b=ut(_,"",b,k),V(P,` 
			${t.part.name??""}
			${t.part.content_preview??""}`)},[()=>({dormant:!t.part.enabled}),()=>({width:`${h(a)??""}%`})]),x(y,u)},$$slots:{default:!0}}),A()}export{ne as P,St as a};
