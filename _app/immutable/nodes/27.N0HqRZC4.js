import"../chunks/DsnmJJEf.js";import{f as c,d as t,s as i,r as a,t as k,b as _,e as be,a as ve,p as fe,i as s,j as I,c as pe,n as S,h as _e,Y as Ke}from"../chunks/DsYFF3e0.js";import{a as aa,s as Y,d as Oe,b as ta}from"../chunks/D6t6EFf3.js";import{i as p,p as He}from"../chunks/Nwe5dM3j.js";import{A as la}from"../chunks/Dbs6j0m1.js";import{s as We,h as q,t as Pe,R as oa,p as ia,K as Re,i as ze,n as Te,u as _a,A as na,r as we,T as Be,j as xe,g as Ve,q as ge,w as he,P as sa,l as ra,U as da,o as Se,x as Xe,k as ca,d as va}from"../chunks/dRtQjgBD.js";import{b as ma,w as Je,r as ua}from"../chunks/23rF6zAW.js";import{p as fa}from"../chunks/DTs_Hi8X.js";import{f as pa}from"../chunks/BgfoKRXQ.js";import{M as ga,a as ba}from"../chunks/Bh8k-UV0.js";import{E as Me}from"../chunks/vDy0Ger1.js";import{t as Le,s as je,c as ha}from"../chunks/R2QwTmpq.js";import{P as Ne}from"../chunks/D13cgyHG.js";import{c as Qe,b as ye}from"../chunks/CNYcfd7V.js";import{E as De}from"../chunks/BBNa1a7U.js";import{O as ya,C as wa}from"../chunks/qJ2HDL7Y.js";import{f as Ae,O as Ce}from"../chunks/S68OugPJ.js";import{O as xa}from"../chunks/crWHS5pZ.js";import{f as ka}from"../chunks/DM4ztRtC.js";import{M as Pa}from"../chunks/GzTuFkmX.js";var La=c('<small class="width_xl4 text_align_right"> </small>'),Oa=c('<div class="display_flex align_items_center gap_sm"><!> <div class="flex_1 bg_5 border_radius_xs overflow_hidden"><div class="bg_a_5 height_100"></div></div></div>');function Ea(v,e){var l=Oa(),g=t(l);{var m=r=>{var u=be(),M=ve(u);aa(M,()=>e.text),_(r,u)},y=r=>{var u=La(),M=t(u);a(u),k(()=>Y(M,`${e.value??""}%`)),_(r,u)};p(g,r=>{e.text?r(m):r(y,!1)})}var w=i(g,2);We(w,"",{},{height:"var(--progress_bar_height, 6px)"});var E=t(w);let d;a(w),a(l),k(r=>d=We(E,"",d,r),[()=>({width:`${e.value??""}%`})]),_(v,l)}var ja=c('<div class="font_size_sm flex_1 font_family_mono ellipsis"><div class="ellipsis"> </div></div>'),Ha=c('<div class="font_size_sm color_c_5 font_weight_500"> </div>'),Ma=c('<div class="p_sm pt_0"><!></div>'),Aa=c('<li class="py_xs3"><div><div class="display_flex justify_content_space_between align_items_center p_sm"><div class="display_flex gap_md align_items_center"><!> <!> <div class="font_size_sm font_weight_600"> </div> <!> <!></div> <span class="font_size_sm"> </span></div> <!></div></li>');function Ze(v,e){fe(e,!0);const l=I(()=>e.action.action_event_data),g=I(()=>{switch(e.action.method){case"ollama_pull":return Te;case"ollama_create":return ze;case"ollama_copy":return Re;case"ollama_delete":return ia;case"ollama_list":case"ollama_show":case"ollama_ps":default:return oa}}),m=I(()=>{switch(s(l)?.step||"initial"){case"handled":return"color_b";case"failed":return"color_c";case"handling":return"color_d";default:return""}}),y=I(()=>{const o=s(l)?.input;if(o&&typeof o=="object"&&"model"in o)return o.model}),w=I(()=>{const o=s(l)?.error;if(o&&typeof o=="object"&&"message"in o)return o.message}),E=I(()=>{const o=s(l)?.progress;if(o&&typeof o=="object"&&"completed"in o&&"total"in o){const n=o.completed,b=o.total;if(typeof n=="number"&&typeof b=="number"&&b>0)return Math.round(n/b*100)}return null});var d=Aa(),r=t(d),u=t(r),M=t(u),j=t(M);{var A=o=>{Ne(o,{})},P=o=>{{let n=I(()=>e.action.success?_a:na),b=I(()=>e.action.failed?"color_c_5":void 0);q(o,{get glyph(){return s(n)},get class(){return s(b)}})}};p(j,o=>{e.action.pending?o(A):o(P,!1)})}var L=i(j,2);q(L,{get glyph(){return s(g)}});var R=i(L,2),z=t(R,!0);a(R);var G=i(R,2);{var Q=o=>{var n=ja(),b=t(n),T=t(b,!0);a(b),a(n),k(()=>Y(T,s(y))),_(o,n)};p(G,o=>{s(y)&&o(Q)})}var N=i(G,2);{var ae=o=>{var n=Ha(),b=t(n,!0);a(n),k(()=>Y(b,s(w))),_(o,n)};p(N,o=>{e.action.failed&&s(w)&&o(ae)})}a(M);var B=i(M,2),K=t(B,!0);a(B),a(u);var Z=i(u,2);{var $=o=>{var n=Ma(),b=t(n);Ea(b,{get value(){return s(E)}}),a(n),_(o,n)};p(Z,o=>{s(E)!==null&&o($)})}a(r),a(d),k(o=>{Pe(r,1,`border_radius_xs ${e.action.pending?"bg_2":"bg_1"} ${s(m)??""}`),Y(z,e.action.method),Y(K,o)},[()=>ma(e.action.updated_date.getTime())]),Le(3,d,()=>je),_(v,d),pe()}const Ga=(v,e)=>{const l=e().completed_actions.map(g=>g.id);e().app.actions.items.remove_many(l)};var Ya=c("<p><small> </small></p>"),Ca=c('<ul class="unstyled"></ul>'),Ra=c('<div class="panel p_md width_upto_md"><div class="display_flex justify_content_space_between align_items_center mb_md"><h4 class="mt_0 mb_0">action history</h4> <div class="display_flex gap_xs align_items_center"><label class="display_flex gap_xs align_items_center mb_0"><input type="checkbox" class="compact"/> <small>show read actions</small></label> <button type="button" class="icon_button plain" title="clear completed actions"><!></button></div></div> <!></div>');function za(v,e){fe(e,!0);const l=He(e,"ollama",7);var g=Ra(),m=t(g),y=i(t(m),2),w=t(y),E=t(w);we(E),S(2),a(w);var d=i(w,2);d.__click=[Ga,l];var r=t(d);q(r,{get glyph(){return Be}}),a(d),a(y),a(m);var u=i(m,2);{var M=A=>{var P=Ya(),L=t(P),R=t(L);a(L),a(P),k(()=>Y(R,`no action history${l().show_read_actions?"":", showing only write actions"}`)),_(A,P)},j=A=>{var P=Ca();xe(P,21,()=>l().filtered_actions,L=>L.id,(L,R)=>{Ze(L,{get action(){return s(R)}})}),a(P),_(A,P)};p(u,A=>{l().filtered_actions.length===0?A(M):A(j,!1)})}a(g),k(()=>d.disabled=l().completed_actions.length===0),Qe(E,()=>l().show_read_actions,A=>l().show_read_actions=A),_(v,g),pe()}Oe(["click"]);var Ta=c('<button type="button" class="icon_button plain"><!></button>'),Da=c('Want to <button type="button" class="inline compact color_a">pull a model</button>?',1),Ia=(v,e)=>e().refresh(),Sa=(v,e)=>e().refresh(),Na=async(v,e)=>{e().host=Ce,await e().refresh()},Ka=c('<div class="row gap_sm"><button type="button" class="flex_shrink_0">reset to default</button> <small class="font_family_mono"> </small></div>'),Wa=(v,e)=>e().clear_all_model_details(),Fa=c('<small class="font_family_mono"> </small>'),Ua=c("<div><!></div>"),qa=c('<div class="panel p_md"><header class="display_flex justify_content_space_between align_items_center mb_md"><h3 class="mt_0 mb_0"><!> configure</h3> <!></header> <section class="width_upto_md display_flex flex_direction_column gap_lg"><p>Ollama is a local LLM provider. <!></p> <div class="display_flex flex_direction_column gap_md"><fieldset><label><div class="title mb_xs">Ollama host url</div> <input type="text" class="plain flex_1"/></label></fieldset> <div class="row gap_xs justify_content_space_between"><button type="button" class="justify_content_start"><!> <span class="ml_sm"><!></span></button> <!> <div class="display_flex gap_sm"><button type="button" class="plain"><!>&nbsp; clear details cache <!></button></div></div> <!></div> <!> <!></section></div>');function Ba(v,e){fe(e,!0);const l=He(e,"ollama",7),g=Ae.get(),{capabilities:m}=g,y=I(()=>l().models.filter(h=>h.ollama_show_response_loaded)),w=I(()=>s(y).length),E=I(()=>m.ollama.error_message);var d=qa(),r=t(d),u=t(r),M=t(u);q(M,{get glyph(){return Ve}}),S(),a(u);var j=i(u,2);{var A=h=>{var H=Ta();H.__click=function(...C){e.onback?.apply(this,C)};var x=t(H);q(x,{get glyph(){return sa}}),a(H),k(()=>ge(H,"title",`back to ${e.last_active_view??""}`)),_(h,H)};p(j,h=>{e.last_active_view&&e.onback&&h(A)})}a(r);var P=i(r,2),L=t(P),R=i(t(L));{var z=h=>{var H=Da(),x=i(ve(H));x.__click=function(...C){e.onshowpull?.apply(this,C)},S(),_(h,H)};p(R,h=>{!s(E)&&m.backend_available&&h(z)})}a(L);var G=i(L,2),Q=t(G),N=t(Q),ae=i(t(N),2);we(ae),ae.__input=[Ia,l],a(N),a(Q);var B=i(Q,2),K=t(B);K.__click=[Sa,l];var Z=t(K);{let h=I(()=>l().list_status==="success"?ra:da);q(Z,{get glyph(){return s(h)}})}var $=i(Z,2),o=t($);{var n=h=>{var H=_e("checking...");_(h,H)},b=h=>{var H=_e("reload");_(h,H)};p(o,h=>{l().list_status==="pending"?h(n):h(b,!1)})}a($),a(K);var T=i(K,2);{var te=h=>{var H=Ka(),x=t(H);x.__click=[Na,l];var C=i(x,2),se=t(C,!0);a(C),a(H),k(()=>Y(se,Ce)),Le(3,H,()=>je,()=>({axis:"x"})),_(h,H)};p(T,h=>{l().host!==Ce&&h(te)})}var V=i(T,2),F=t(V);F.__click=[Wa,l];var O=t(F);q(O,{get glyph(){return Be}});var D=i(O,2);{var f=h=>{var H=_e();k(()=>Y(H,`(${s(w)??""})`)),_(h,H)};p(D,h=>{s(w)&&h(f)})}a(F),a(V),a(B);var W=i(B,2);{var le=h=>{var H=Ua(),x=t(H);De(x,{children:(C,se)=>{var ne=Fa(),re=t(ne,!0);a(ne),k(()=>Y(re,s(E))),_(C,ne)},$$slots:{default:!0}}),a(H),Le(3,H,()=>je),_(h,H)};p(W,h=>{s(E)&&h(le)})}a(G);var X=i(G,2);ya(X,{get ollama(){return l()}});var oe=i(X,2);za(oe,{get ollama(){return l()}}),a(P),a(d),k(h=>{ge(ae,"placeholder",`${he} ${Ce}`),K.disabled=l().list_status==="pending"||!m.backend_available,ge(F,"title",`clear all cached model details (${s(w)??""} item${h??""})`),F.disabled=s(w)===0},[()=>Je(s(w))]),ye(ae,()=>l().host,h=>l().host=h),_(v,d),pe()}Oe(["click","input"]);const Va=(v,e,l,g)=>{v.key==="Enter"&&e().pull_can_pull?l():v.key==="Escape"&&g.onclose?.()};var Xa=(v,e,l)=>e().pull_model_name=s(l).name,Ja=c('<button type="button" class="compact"> </button>'),Qa=c('<div class="display_flex flex_wrap_wrap gap_xs"></div>'),Za=(v,e)=>e.oncancel(),$a=c('<button type="button" class="plain">cancel</button>'),et=c('<div class="mt_md"><h4 class="mt_0 mb_sm">pull operations</h4> <ul class="unstyled"></ul></div>'),at=c('<div class="panel p_md"><header class="display_flex justify_content_space_between align_items_center mb_md"><h3 class="mt_0 mb_0"><!> pull model</h3> <button type="button" class="icon_button plain" title="close"><!></button></header> <div class="width_upto_md display_flex flex_direction_column gap_md"><p>This downloads a builtin model so you can use it locally.</p> <fieldset><label class="display_block mb_xs"><div class="title">model name</div> <input type="text" class="plain width_100"/></label> <p>Enter a model name from the <a href="https://ollama.com/library" target="_blank" rel="noopener noreferrer">Ollama library</a><!></p> <!></fieldset> <label class="display_flex gap_xs align_items_center"><input type="checkbox" class="compact"/> <span>allow insecure connections</span></label> <div class="display_flex gap_md"><button type="button" class="color_a"><!>&nbsp; pull model</button> <!></div> <!> <!></div></div>');function tt(v,e){fe(e,!0);const l=He(e,"ollama",7),g=Ae.get(),m=I(()=>g.ollama),y=I(()=>s(m).models_not_downloaded),w=I(()=>l().actions.filter(f=>f.method==="ollama_pull")),E=async()=>{e.onclose?.(),await l().pull()};var d=at(),r=t(d),u=t(r),M=t(u);q(M,{get glyph(){return Te}}),S(),a(u);var j=i(u,2);j.__click=function(...f){e.onclose?.apply(this,f)};var A=t(j);q(A,{get glyph(){return Se}}),a(j),a(r);var P=i(r,2),L=i(t(P),2),R=t(L),z=i(t(R),2);we(z),z.__keydown=[Va,l,E,e],a(R);var G=i(R,2),Q=i(t(G),2);{var N=f=>{var W=_e(" or choose from the available models:");_(f,W)},ae=f=>{var W=_e(".");_(f,W)};p(Q,f=>{s(y).length>0?f(N):f(ae,!1)})}a(G);var B=i(G,2);{var K=f=>{var W=Qa();xe(W,21,()=>s(y),le=>le.id,(le,X)=>{var oe=Ja();oe.__click=[Xa,l,X];var h=t(oe,!0);a(oe),k(H=>{oe.disabled=H,Y(h,s(X).name)},[()=>l().pull_model_name===s(X).name||l().pull_is_pulling(s(X).name)]),_(le,oe)}),a(W),_(f,W)};p(B,f=>{s(y).length>0&&f(K)})}a(L);var Z=i(L,2),$=t(Z);we($),S(2),a(Z);var o=i(Z,2),n=t(o);n.__click=E;var b=t(n);q(b,{get glyph(){return Te}}),S(),a(n);var T=i(n,2);{var te=f=>{var W=$a();W.__click=[Za,e],_(f,W)};p(T,f=>{e.oncancel&&f(te)})}a(o);var V=i(o,2);{var F=f=>{De(f,{children:(W,le)=>{S();var X=_e("this model is already downloaded");_(W,X)},$$slots:{default:!0}})};p(V,f=>{l().pull_already_downloaded&&f(F)})}var O=i(V,2);{var D=f=>{var W=et(),le=i(t(W),2);xe(le,21,()=>s(w),X=>X.id,(X,oe)=>{Ze(X,{get action(){return s(oe)}})}),a(le),a(W),_(f,W)};p(O,f=>{s(w).length>0&&f(D)})}a(P),a(d),k(()=>{ge(z,"placeholder",`${he} e.g., llama3.1, mistral, codellama`),n.disabled=!l().pull_can_pull}),ye(z,()=>l().pull_model_name,f=>l().pull_model_name=f),Qe($,()=>l().pull_insecure,f=>l().pull_insecure=f),_(v,d),pe()}Oe(["click","keydown"]);const lt=async(v,e,l)=>{await e().create(),l.onclose()},Fe=(v,e)=>{v.key==="Escape"&&e.onclose()};var ot=c("<option> </option>"),it=c('<select class="plain width_100"><option>-- select base model --</option><!></select>'),_t=c('<input type="text" class="plain width_100"/>'),nt=c(`<div class="panel p_md"><header class="display_flex justify_content_space_between align_items_center mb_md"><h3 class="mt_0 mb_0"><!> create model</h3> <button type="button" class="icon_button plain" title="close"><!></button></header> <section class="width_upto_md display_flex flex_direction_column gap_md"><p>This creates a new custom modelfile, to download a builtin model see <button type="button" class="inline compact">pull model</button>.</p> <fieldset><label><div class="title mb_xs">new model name</div> <input type="text" class="plain width_100"/></label></fieldset> <fieldset><label><div class="title mb_xs">base model (optional)</div> <!></label> <p>Choose a base model to customize, or leave empty for a completely new model</p></fieldset> <fieldset><label><div class="title mb_xs">system prompt (optional)</div> <textarea class="plain width_100" rows="4"></textarea></label> <p>Define the model's behavior and personality</p></fieldset> <fieldset><label><div class="title mb_xs">template (optional)</div> <textarea class="plain width_100" rows="3"></textarea></label> <p>Custom prompt template using Ollama template syntax</p></fieldset> <div class="display_flex gap_md"><button type="button" class="color_b"><!> </button> <button type="button" class="plain">cancel</button></div> <!></section></div>`);function st(v,e){fe(e,!0);const l=He(e,"ollama",7);var g=nt(),m=t(g),y=t(m),w=t(y);q(w,{get glyph(){return ze}}),S(),a(y);var E=i(y,2);E.__click=function(...O){e.onclose?.apply(this,O)};var d=t(E);q(d,{get glyph(){return Se}}),a(E),a(m);var r=i(m,2),u=t(r),M=i(t(u));M.__click=function(...O){e.onshowpull?.apply(this,O)},S(),a(u);var j=i(u,2),A=t(j),P=i(t(A),2);we(P),P.__keydown=[Fe,e],a(A),a(j);var L=i(j,2),R=t(L),z=i(t(R),2);{var G=O=>{var D=it(),f=t(D);f.value=f.__value="";var W=i(f);xe(W,16,()=>l().model_names,le=>le,(le,X)=>{var oe=ot(),h=t(oe,!0);a(oe);var H={};k(()=>{Y(h,X),H!==(H=X)&&(oe.value=(oe.__value=X)??"")}),_(le,oe)}),a(D),k(()=>D.disabled=l().create_is_creating),Xe(D,()=>l().create_from_model,le=>l().create_from_model=le),_(O,D)},Q=O=>{var D=_t();we(D),D.__keydown=[Fe,e],k(()=>{ge(D,"placeholder",`${he} base model name`),D.disabled=l().create_is_creating}),ye(D,()=>l().create_from_model,f=>l().create_from_model=f),_(O,D)};p(z,O=>{l().model_names.length>0?O(G):O(Q,!1)})}a(R),S(2),a(L);var N=i(L,2),ae=t(N),B=i(t(ae),2);Ke(B),a(ae),S(2),a(N);var K=i(N,2),Z=t(K),$=i(t(Z),2);Ke($),a(Z),S(2),a(K);var o=i(K,2),n=t(o);n.__click=[lt,l,e];var b=t(n);q(b,{get glyph(){return ze}});var T=i(b);a(n);var te=i(n,2);te.__click=function(...O){e.onclose?.apply(this,O)},a(o);var V=i(o,2);{var F=O=>{De(O,{children:(D,f)=>{S();var W=_e("a model with this name already exists");_(D,W)},$$slots:{default:!0}})};p(V,O=>{l().create_is_duplicate_name&&O(F)})}a(r),a(g),k(()=>{ge(P,"placeholder",`${he} my-custom-model`),P.disabled=l().create_is_creating,ge(B,"placeholder",`${he} You are a helpful assistant...`),B.disabled=l().create_is_creating,ge($,"placeholder",`${he} {{{ .System }}} {{{ .Prompt }}}`),$.disabled=l().create_is_creating,n.disabled=!l().create_can_create||l().create_is_creating,Y(T,` 
				${l().create_is_creating?"creating...":"create model"}`),te.disabled=l().create_is_creating}),ye(P,()=>l().create_model_name,O=>l().create_model_name=O),ye(B,()=>l().create_system_prompt,O=>l().create_system_prompt=O),ye($,()=>l().create_template,O=>l().create_template=O),_(v,g),pe()}Oe(["click","keydown"]);const Ue=(v,e,l,g)=>{v.key==="Enter"&&!e().copy_is_copying&&e().copy_destination_model_changed?l():v.key==="Escape"&&g.onclose()};var rt=c("<option> </option>"),dt=c('<select class="plain width_100"><option>-- select source model --</option><!></select>'),ct=c('<input type="text" class="plain width_100"/>'),vt=c('<div class="panel p_md"><header class="display_flex justify_content_space_between align_items_center mb_md"><h3 class="mt_0 mb_0"><!> copy model</h3> <button type="button" class="icon_button plain" title="close"><!></button></header> <section class="width_upto_md display_flex flex_direction_column gap_md"><p>Create a copy of the source model with a new name.</p> <fieldset><label><div class="title mb_xs">source model</div> <!></label></fieldset> <fieldset><label><div class="title mb_xs">destination model name</div> <input type="text" class="plain width_100"/></label></fieldset> <div class="display_flex gap_md"><button type="button" class="color_d"><!> </button> <button type="button" class="plain">cancel</button></div> <!></section></div>');function mt(v,e){fe(e,!0);const l=He(e,"ollama",7),g=async()=>{await l().copy(),e.onclose()};var m=vt(),y=t(m),w=t(y),E=t(w);q(E,{get glyph(){return Re}}),S(),a(w);var d=i(w,2);d.__click=function(...o){e.onclose?.apply(this,o)};var r=t(d);q(r,{get glyph(){return Se}}),a(d),a(y);var u=i(y,2),M=i(t(u),2),j=t(M),A=i(t(j),2);{var P=o=>{var n=dt(),b=t(n);b.value=b.__value="";var T=i(b);xe(T,16,()=>l().model_names,te=>te,(te,V)=>{var F=rt(),O=t(F,!0);a(F);var D={};k(()=>{Y(O,V),D!==(D=V)&&(F.value=(F.__value=V)??"")}),_(te,F)}),a(n),k(()=>n.disabled=l().copy_is_copying),Xe(n,()=>l().copy_source_model,te=>l().copy_source_model=te),_(o,n)},L=o=>{var n=ct();we(n),n.__keydown=[Ue,l,g,e],k(()=>{ge(n,"placeholder",`${he} source model name`),n.disabled=l().copy_is_copying}),ye(n,()=>l().copy_source_model,b=>l().copy_source_model=b),_(o,n)};p(A,o=>{l().model_names.length>0?o(P):o(L,!1)})}a(j),a(M);var R=i(M,2),z=t(R),G=i(t(z),2);we(G),G.__keydown=[Ue,l,g,e],a(z),a(R);var Q=i(R,2),N=t(Q);N.__click=g;var ae=t(N);q(ae,{get glyph(){return Re}});var B=i(ae);a(N);var K=i(N,2);K.__click=function(...o){e.onclose?.apply(this,o)},a(Q);var Z=i(Q,2);{var $=o=>{De(o,{children:(n,b)=>{S();var T=_e("a model with this name already exists");_(n,T)},$$slots:{default:!0}})};p(Z,o=>{l().copy_is_duplicate_name&&o($)})}a(u),a(m),k(()=>{ge(G,"placeholder",`${he} new model name`),G.disabled=l().copy_is_copying,N.disabled=!l().copy_destination_model_changed||l().copy_is_copying,Y(B,` 
				${l().copy_is_copying?"copying...":"copy model"}`),K.disabled=l().copy_is_copying}),ye(G,()=>l().copy_destination_model,o=>l().copy_destination_model=o),_(v,m),pe()}Oe(["click","keydown"]);var ut=c('<div><small class="chip">loaded</small></div>'),ft=c("<!> <!>",1);function pt(v,e){fe(e,!0);const l=I(()=>e.ollama.running_model_names.has(e.model.name)),g=I(()=>e.ollama.pull_is_pulling(e.model.name));var m=ft(),y=ve(m);{var w=r=>{Ne(r,{})};p(y,r=>{s(g)&&r(w)})}var E=i(y,2);{var d=r=>{var u=ut();Le(3,u,()=>ha,()=>({duration:200})),_(r,u)};p(E,r=>{s(l)&&r(d)})}_(v,m),pe()}var gt=c('<div class="font_size_sm"> </div>'),bt=c('<button type="button"><div class="display_flex flex_direction_column gap_xs width_100"><div class="display_flex justify_content_space_between align_items_center"><div class="ellipsis font_size_lg"> </div> <!></div> <!></div></button>');function qe(v,e){fe(e,!0);const l=He(e,"onclick",3,()=>s(m).select(e.model)),g=I(()=>e.model.app),m=I(()=>s(g).ollama),y=I(()=>s(m).manager_selected_view==="model"?s(m).manager_selected_model?.id===e.model.id:s(m).manager_selected_view==="pull"?s(m).pull_model_name===e.model.name:!1);ga(v,{get model(){return e.model},children:(w,E)=>{var d=bt();let r;d.__click=function(...z){l()?.apply(this,z)};var u=t(d),M=t(u),j=t(M),A=t(j,!0);a(j);var P=i(j,2);pt(P,{get model(){return e.model},get ollama(){return s(m)}}),a(M);var L=i(M,2);{var R=z=>{var G=gt(),Q=t(G,!0);a(G),k(N=>Y(Q,N),[()=>ka(e.model.filesize)]),_(z,G)};p(L,z=>{e.model.filesize&&z(R)})}a(u),a(d),k(z=>{r=Pe(d,1,"menu_item selectable plain text_align_start p_sm border_radius_0 font_weight_400",null,r,z),Y(A,e.model.name)},[()=>({selected:s(y)})]),_(w,d)},$$slots:{default:!0}}),pe()}Oe(["click"]);var ht=c("<span> </span>"),yt=c(" <!>",1),wt=(v,e)=>{e.ollama.set_manager_view("configure",null)},xt=(v,e)=>e.ollama.set_manager_view("pull",null),kt=(v,e)=>e.ollama.set_manager_view("create",null),Pt=(v,e)=>e.ollama.set_manager_view("copy",null),Lt=c("<li><!></li>"),Ot=c("<li><!></li>"),Et=c('<section><h3 class="mt_xl3 mb_md"> </h3> <menu class="unstyled column"></menu></section>'),jt=c('<section><h3 class="mt_xl3 mb_md"> </h3> <menu class="unstyled column"></menu></section> <!>',1),Ht=(v,e)=>e.ollama.set_manager_view("pull",null),Mt=c('<section class="panel p_md"><p>no models found, <button type="button" class="inline compact">pull a model</button> or install them using the <!></p></section>'),At=c('<div class="display_block panel p_md"><!></div>'),Gt=c('<div class="display_flex height_100"><div class="height_100 overflow_hidden width_upto_sm width_atleast_sm"><div class="height_100 overflow_auto scrollbar_width_thin p_md"><section class="display_flex flex_direction_column gap_md"><div class="display_flex gap_sm align_items_start"><div><div class="column justify_content_center gap_xs p_md"><span class="font_size_lg"> <!></span> <div class="font_family_mono font_size_sm"><!></div></div></div></div> <div class="flex_direction_column gap_sm"><button type="button"><!> <span class="ml_sm">configure</span></button> <button type="button"><!> <span class="ml_sm">pull model</span></button> <button type="button"><!> <span class="ml_sm">create model</span></button> <button type="button"><!> <span class="ml_sm">copy model</span></button></div></section> <!></div></div> <div class="flex_1 height_100 overflow_auto p_md"><!></div></div>');function Yt(v,e){fe(e,!0);const l=Ae.get(),{capabilities:g}=l;ta(()=>{e.ollama.refresh();const x=!e.ollama.ps_polling_enabled;return x&&e.ollama.start_ps_polling({immediate:!1}),x?()=>{e.ollama.stop_ps_polling()}:void 0});const m=I(()=>g.ollama),y=I(()=>s(m).status);var w=Gt(),E=t(w),d=t(E),r=t(d),u=t(r),M=t(u);let j;var A=t(M),P=t(A),L=t(P),R=i(L);{var z=x=>{Ne(x,{inline:!0,attrs:{class:"ml_sm"}})};p(R,x=>{s(y)==="pending"&&x(z)})}a(P);var G=i(P,2),Q=t(G);{var N=x=>{var C=_e();k(()=>Y(C,g.ollama.error_message)),_(x,C)},ae=x=>{var C=be(),se=ve(C);{var ne=U=>{var ie=_e("backend unavailable");_(U,ie)},re=U=>{var ie=yt(),de=ve(ie),ee=i(de);{var me=J=>{var ce=ht(),Ee=t(ce);a(ce),k(ke=>Y(Ee,`→ ${ke??""}ms`),[()=>Math.round(e.ollama.list_round_trip_time)]),_(J,ce)};p(ee,J=>{e.ollama.list_round_trip_time&&J(me)})}k(()=>Y(de,`${e.ollama.host??""} `)),_(U,ie)};p(se,U=>{g.backend_available?U(re,!1):U(ne)},!0)}_(x,C)};p(Q,x=>{g.ollama.error_message?x(N):x(ae,!1)})}a(G),a(A),a(M),a(u);var B=i(u,2),K=t(B);let Z;K.__click=[wt,e];var $=t(K);q($,{get glyph(){return Ve}}),S(2),a(K);var o=i(K,2);let n;o.__click=[xt,e];var b=t(o);q(b,{get glyph(){return Te}}),S(2),a(o);var T=i(o,2);let te;T.__click=[kt,e];var V=t(T);q(V,{get glyph(){return ze}}),S(2),a(T);var F=i(T,2);let O;F.__click=[Pt,e];var D=t(F);q(D,{get glyph(){return Re}}),S(2),a(F),a(B),a(r);var f=i(r,2);{var W=x=>{var C=jt(),se=ve(C),ne=t(se),re=t(ne);a(ne);var U=i(ne,2);xe(U,21,()=>e.ollama.models_downloaded,ee=>ee.id,(ee,me)=>{var J=Lt(),ce=t(J);qe(ce,{get model(){return s(me)}}),a(J),Le(3,J,()=>je),_(ee,J)}),a(U),a(se);var ie=i(se,2);{var de=ee=>{var me=Et(),J=t(me),ce=t(J);a(J);var Ee=i(J,2);xe(Ee,21,()=>e.ollama.models_not_downloaded,ke=>ke.id,(ke,Ge)=>{var ue=Ot(),Ye=t(ue);qe(Ye,{get model(){return s(Ge)},onclick:async()=>{await s(Ge).navigate_to_download()}}),a(ue),Le(3,ue,()=>je),_(ke,ue)}),a(Ee),a(me),k(()=>Y(ce,`${e.ollama.models_not_downloaded.length??""} not downloaded`)),_(ee,me)};p(ie,ee=>{e.ollama.models_not_downloaded.length>0&&ee(de)})}k(ee=>Y(re,`${e.ollama.models_downloaded.length??""} model${ee??""}`),[()=>Je(e.ollama.models_downloaded.length)]),_(x,C)},le=x=>{var C=be(),se=ve(C);{var ne=re=>{var U=Mt(),ie=t(U),de=i(t(ie));de.__click=[Ht,e];var ee=i(de,2);Me(ee,{href:"https://github.com/ollama/ollama",children:(me,J)=>{S();var ce=_e("Ollama CLI");_(me,ce)},$$slots:{default:!0}}),a(ie),a(U),k(()=>de.disabled=e.ollama.manager_selected_view==="pull"),Le(3,U,()=>je),_(re,U)};p(se,re=>{e.ollama.available&&re(ne)},!0)}_(x,C)};p(f,x=>{e.ollama.models_downloaded.length>0?x(W):x(le,!1)})}a(d),a(E);var X=i(E,2),oe=t(X);{var h=x=>{{let C=I(()=>e.ollama.manager_last_active_view?.view??null);Ba(x,{get ollama(){return e.ollama},get last_active_view(){return s(C)},onshowpull:()=>e.ollama.set_manager_view("pull",null),onback:()=>e.ollama.manager_back_to_last_view()})}},H=x=>{var C=be(),se=ve(C);{var ne=U=>{var ie=At(),de=t(ie);xa(de,{get model(){return e.ollama.manager_selected_model},onshow:ee=>e.ollama.app.api.ollama_show({model:ee.name}),onclose:()=>e.ollama.close_form(),ondelete:ee=>e.ollama.delete(ee.name)}),a(ie),_(U,ie)},re=U=>{var ie=be(),de=ve(ie);{var ee=J=>{tt(J,{get ollama(){return e.ollama},oncancel:()=>e.ollama.close_form()})},me=J=>{var ce=be(),Ee=ve(ce);{var ke=ue=>{st(ue,{get ollama(){return e.ollama},onclose:()=>e.ollama.close_form(),onshowpull:()=>e.ollama.set_manager_view("pull",null)})},Ge=ue=>{var Ye=be(),$e=ve(Ye);{var ea=Ie=>{mt(Ie,{get ollama(){return e.ollama},onclose:()=>e.ollama.close_form()})};p($e,Ie=>{e.ollama.manager_selected_view==="copy"&&Ie(ea)},!0)}_(ue,Ye)};p(Ee,ue=>{e.ollama.manager_selected_view==="create"?ue(ke):ue(Ge,!1)},!0)}_(J,ce)};p(de,J=>{e.ollama.manager_selected_view==="pull"?J(ee):J(me,!1)},!0)}_(U,ie)};p(se,U=>{e.ollama.manager_selected_view==="model"&&e.ollama.manager_selected_model?U(ne):U(re,!1)},!0)}_(x,C)};p(oe,x=>{e.ollama.manager_selected_view==="configure"?x(h):x(H,!1)})}a(X),a(w),k((x,C,se,ne,re)=>{j=Pe(M,1,"flex_1 chip plain display_flex justify_content_start font_weight_400",null,j,x),Y(L,`Ollama ${e.ollama.available?"connected":s(y)==="failure"?"unavailable":s(y)==="pending"?"connecting":"not checked"} `),Z=Pe(K,1,"width_100 justify_content_start border_radius_0 plain menu_item selectable font_weight_500",null,Z,C),n=Pe(o,1,"width_100 justify_content_start border_radius_0 plain menu_item selectable font_weight_500",null,n,se),o.disabled=!e.ollama.available,te=Pe(T,1,"width_100 justify_content_start border_radius_0 plain menu_item selectable font_weight_500",null,te,ne),T.disabled=!e.ollama.available,O=Pe(F,1,"width_100 justify_content_start border_radius_0 plain menu_item selectable font_weight_500",null,O,re),F.disabled=!e.ollama.available||e.ollama.models_downloaded.length===0},[()=>({color_b:e.ollama.available,color_c:!e.ollama.available&&s(y)==="failure",color_d:!e.ollama.available&&s(y)==="pending",color_e:!e.ollama.available&&s(y)==="initial"}),()=>({selected:e.ollama.manager_selected_view==="configure"}),()=>({selected:e.ollama.manager_selected_view==="pull"}),()=>({selected:e.ollama.manager_selected_view==="create"}),()=>({selected:e.ollama.manager_selected_view==="copy"})]),_(v,w),pe()}Oe(["click"]);var Ct=c('<h1 class="mb_md"> </h1>'),Rt=c('<h2 class="mb_md"><!></h2>'),zt=c('<div class="width_upto_md mb_lg"><!> <!></div>'),Tt=c('<div><section class="display_flex mb_lg"><div class="display_flex"><!> <div class="pl_xl"><!> <p class="mb_md"> </p> <p class="mb_md"><!> </p> <div class="row gap_xl"><!> <!></div></div></div></section> <section><!></section> <section><aside>⚠️ This information is incomplete and may be incorrect or outdated.</aside> <ul class="display_flex flex_wrap_wrap unstyled gap_md"></ul></section></div>');function Dt(v,e){fe(e,!0);const l=I(()=>fa.url.pathname===ua(`/providers/${e.provider.name}`)),g=Ae.get();var m=Tt();ca(m,()=>({...e.attrs,class:`panel p_lg ${e.attrs?.class??""}`}));var y=t(m),w=t(y),E=t(w);ba(E,{get name(){return e.provider.name},size:"var(--icon_size_xl)",fill:null});var d=i(E,2),r=t(d);{var u=o=>{var n=Ct(),b=t(n,!0);a(n),k(()=>Y(b,e.provider.title)),_(o,n)},M=o=>{var n=Rt(),b=t(n);Me(b,{get href(){return e.provider.url},children:(T,te)=>{S();var V=_e();k(()=>Y(V,e.provider.title)),_(T,V)},$$slots:{default:!0}}),a(n),_(o,n)};p(r,o=>{s(l)?o(u):o(M,!1)})}var j=i(r,2),A=t(j,!0);a(j);var P=i(j,2),L=t(P);q(L,{get glyph(){return va}});var R=i(L,1,!0);a(P);var z=i(P,2),G=t(z);Me(G,{get href(){return e.provider.homepage},children:(o,n)=>{S();var b=_e();k(T=>Y(b,T),[()=>pa(e.provider.homepage)]),_(o,b)},$$slots:{default:!0}});var Q=i(G,2);Me(Q,{get href(){return e.provider.url},children:(o,n)=>{S();var b=_e("docs");_(o,b)},$$slots:{default:!0}}),a(z),a(d),a(w),a(y);var N=i(y,2),ae=t(N);{var B=o=>{Yt(o,{get ollama(){return g.ollama}})},K=o=>{var n=zt(),b=t(n);wa(b,{get provider_name(){return e.provider.name},show_info:!1});var T=i(b,2);{var te=V=>{Me(V,{get href(){return e.provider.api_key_url},children:(F,O)=>{S();var D=_e("get API key");_(F,D)},$$slots:{default:!0}})};p(T,V=>{e.provider.api_key_url&&V(te)})}a(n),_(o,n)};p(ae,o=>{e.provider.name==="ollama"?o(B):o(K,!1)})}a(N);var Z=i(N,2),$=i(t(Z),2);xe($,20,()=>e.provider.models,o=>o,(o,n)=>{Pa(o,{get model(){return n},omit_provider:!0})}),a($),a(Z),a(m),k(()=>{Y(A,e.provider.company),Y(R,e.provider.name)}),_(v,m),pe()}var It=c('<div class="p_sm"><!></div>');function _l(v,e){fe(e,!0);const l=Ae.get(),g=I(()=>l.providers.find_by_name(e.params.slug));var m=It(),y=t(m);{var w=d=>{Dt(d,{get provider(){return s(g)}})},E=d=>{var r=be(),u=ve(r);{var M=j=>{la(j,{status:"error",children:(A,P)=>{S();var L=_e();k(()=>Y(L,`no provider found with name "${e.params.slug??""}"`)),_(A,L)},$$slots:{default:!0}})};p(u,j=>{j(M)},!0)}_(d,r)};p(y,d=>{s(g)?d(w):d(E,!1)})}a(m),_(v,m),pe()}export{_l as component};
