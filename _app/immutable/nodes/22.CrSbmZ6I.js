import"../chunks/DsnmJJEf.js";import{p as st,f as u,d as a,s as r,r as e,t as V,i as t,b as m,k as tt,l as W,n as C,c as rt,j as et,a as at,e as pt}from"../chunks/DsYFF3e0.js";import{d as ot,s as I,e as mt}from"../chunks/D6t6EFf3.js";import{p as ut,i as F}from"../chunks/Nwe5dM3j.js";import{r as N,j as _t,F as bt,h as q,p as X,i as ht}from"../chunks/dRtQjgBD.js";import{b as U}from"../chunks/CNYcfd7V.js";import{s as gt}from"../chunks/BlUH4YWX.js";import{p as ft}from"../chunks/DRbQk6-s.js";import{P as kt}from"../chunks/51PjwmIj.js";import{S as xt,P as yt}from"../chunks/BdKQ65IZ.js";import{R as wt}from"../chunks/B-Bqdw4P.js";import{b as jt}from"../chunks/BwYh6stK.js";var Lt=u('<span class="chip color_e display_flex align_items_center svelte-1vpyxxc"> <button type="button" class="icon_button plain font_size_xs ml_xs" title="Remove tag"><!></button></span>'),Pt=(b,o,d,s)=>{if(!t(o)){t(d)?.focus();return}s.on_add_tag(s.index,t(o)),W(o,"")},St=(b,o)=>o.on_remove(o.index),Dt=u(`<div class="panel p_sm mb_md"><div class="mb_sm"><label><span class="display_block mb_xs">Path</span> <input type="text" class="width_100" placeholder="./path/to/repo/checkout"/></label></div> <div class="mb_sm"><label><span class="display_block mb_xs">Label</span> <input type="text" class="width_100" placeholder="description (e.g. 'development', 'some-feature-branch', 'some-bug-repro')"/></label></div> <div class="mb_sm"><span class="display_block mb_xs">Tags</span> <div class="display_flex flex_wrap_wrap gap_xs mb_xs"></div> <div class="display_flex gap_xs"><input type="text" placeholder="new tag" class="flex_1"/> <button type="button">add tag</button></div></div> <div class="display_flex justify_content_end"><button type="button" class="color_c"><!>&nbsp; delete checkout</button></div></div>`);function Rt(b,o){st(o,!0);const d=ut(o,"checkout",7);let s=tt(""),w=tt(void 0);var j=Dt(),h=a(j),f=a(h),L=r(a(f),2);N(L),e(f),e(h);var k=r(h,2),H=a(k),P=r(a(H),2);N(P),e(H),e(k);var S=r(k,2),D=r(a(S),2);_t(D,21,()=>d().tags,bt,(n,Y,z)=>{var G=Lt(),x=a(G),y=r(x);y.__click=()=>o.on_remove_tag(o.index,z);var B=a(y);q(B,{get glyph(){return X}}),e(y),e(G),V(()=>I(x,`${t(Y)??""} `)),m(n,G)}),e(D);var T=r(D,2),_=a(T);N(_),jt(_,n=>W(w,n),()=>t(w));var c=r(_,2);c.__click=[Pt,s,w,o],e(T),e(S);var l=r(S,2),p=a(l);p.__click=[St,o];var R=a(p);q(R,{get glyph(){return X}}),C(),e(p),e(l),e(j),U(L,()=>d().path,n=>d().path=n),U(P,()=>d().label,n=>d().label=n),U(_,()=>t(s),n=>W(s,n)),m(b,j),rt()}ot(["click"]);var Gt=u("<!> <!>",1),Et=u("<p><small> </small> <br/> <small> </small></p>"),Ft=u('<p class="mb_md">no checkouts yet</p>'),Ht=(b,o)=>t(o).add_checkout_dir(),Tt=(b,o)=>t(o).remove_repo(),Yt=u('<button type="button" class="color_c"><!>&nbsp; delete repo</button>'),zt=u(`<div class="p_lg"><h1 class="mb_lg">edit repo</h1> <div class="panel p_md width_upto_md"><form><div class="mb_lg"><label><h3 class="mt_0 mb_sm">Git url</h3> <input type="text" class="width_100"/></label> <p>enter the git URL, e.g. https://github.com/username/repo or
								git@github.com:username/repo.git</p></div> <!> <div class="mb_lg"><h3 class="mt_0 mb_sm">checkouts</h3> <!> <div class="mt_md"><button type="button" class="color_b"><!>&nbsp; add checkout</button></div></div> <div class="width_100 display_flex justify_content_space_between gap_sm"><div><button type="submit" class="color_a"> </button></div> <!></div></form></div></div>`),At=u('<div class="repo_layout svelte-15gkc4u"><!> <!> <div class="repo_content svelte-15gkc4u"><!></div></div>');function Wt(b,o){st(o,!0);const d=ft.get(),s=et(()=>d.current_repos_viewmodel),w=(_,c)=>{if(!t(s)||!c.trim())return;const l=t(s).checkouts[_];l&&!l.tags.includes(c)&&l.tags.push(c)},j=(_,c)=>{if(!t(s))return;const l=t(s).checkouts[_];l&&l.tags.splice(c,1)},h=et(()=>d.current_project);var f=At(),L=a(f);kt(L,{});var k=r(L,2);{var H=_=>{var c=Gt(),l=at(c);xt(l,{get project(){return t(h)},section:"repos"});var p=r(l,2);wt(p,{}),m(_,c)};F(k,_=>{t(h)&&_(H)})}var P=r(k,2),S=a(P);{var D=_=>{var c=zt(),l=r(a(c),2),p=a(l),R=a(p),n=a(R),Y=r(a(n),2);N(Y),e(n),C(2),e(R);var z=r(R,2);{var G=i=>{var v=Et(),g=a(v),E=a(g);e(g);var A=r(g,4),O=a(A);e(A),e(v),V((Q,dt)=>{I(E,`created ${Q??""}`),I(O,`updated ${dt??""}`)},[()=>new Date(t(s).repo.created).toLocaleString(),()=>new Date(t(s).repo.updated).toLocaleString()]),m(i,v)};F(z,i=>{t(s).repo&&i(G)})}var x=r(z,2),y=r(a(x),2);{var B=i=>{var v=Ft();m(i,v)},it=i=>{var v=pt(),g=at(v);_t(g,19,()=>t(s).checkouts,E=>E.id,(E,A,O)=>{Rt(E,{get checkout(){return t(A)},get index(){return t(O)},on_remove:Q=>t(s).remove_checkout_dir(Q),on_add_tag:w,on_remove_tag:j})}),m(i,v)};F(y,i=>{t(s).checkouts.length===0?i(B):i(it,!1)})}var Z=r(y,2),J=a(Z);J.__click=[Ht,s];var lt=a(J);q(lt,{get glyph(){return ht}}),C(),e(J),e(Z),e(x);var $=r(x,2),K=a($),M=a(K),ct=a(M,!0);e(M),e(K);var vt=r(K,2);{var nt=i=>{var v=Yt();v.__click=[Tt,s];var g=a(v);q(g,{get glyph(){return X}}),C(),e(v),m(i,v)};F(vt,i=>{t(s).repo&&i(nt)})}e($),e(p),e(l),e(c),V(()=>{M.disabled=t(s).repo&&!t(s).has_changes,I(ct,t(s).repo?"save changes":"add repo")}),mt("submit",p,i=>{gt(i),t(s).save_repo_settings()}),U(Y,()=>t(s).git_url,i=>t(s).git_url=i),m(_,c)},T=_=>{yt(_,{})};F(S,_=>{t(h)&&t(s)?_(D):_(T,!1)})}e(P),e(f),m(b,f),rt()}ot(["click"]);export{Wt as component};
