import"../chunks/DsnmJJEf.js";import{p as ne,e as pe,a as Q,b as g,c as ce,i as a,k as me,f as x,d as e,j as U,r as t,s,t as X,l as ue,n as Z,Y as fe}from"../chunks/DsYFF3e0.js";import{d as ge,s as be}from"../chunks/D6t6EFf3.js";import{i as D}from"../chunks/Nwe5dM3j.js";import{h as $}from"../chunks/Dfb2Cv-R.js";import{h as R,v as ee,t as he,p as xe,r as te,q as je,w as we}from"../chunks/dRtQjgBD.js";import{b as T}from"../chunks/CNYcfd7V.js";import{g as ye}from"../chunks/BfKjqRXe.js";import{r as Pe}from"../chunks/Cm6bndgw.js";import{p as ke}from"../chunks/BOJOWGQB.js";import{P as qe}from"../chunks/DHYu6a2Z.js";import{S as Ee,P as Le}from"../chunks/C4pRtODg.js";import{P as Se}from"../chunks/FSJW9jIi.js";import{f as Ge}from"../chunks/DPkzVgCT.js";const ae=(b,o)=>{ue(o,!a(o))},He=(b,o,_)=>{const h=o.current_project_viewmodel;!a(_)?.project||!a(_).current_page||!h||confirm("Are you sure you want to delete this page? This action cannot be undone.")&&(h.delete_project_page(a(_).page_id),ye(Pe(`/projects/${a(_).project_id}/pages`)))};var Ye=x('<div><div class="markdown_preview p_lg svelte-jqr1x4"><!></div> <button type="button" class="position_fixed top_0 right_0 icon_button plain border_radius_0" aria-label="close preview" title="close preview"><!></button></div>'),Ae=x("<!> <!>",1),De=(b,o)=>a(o).save_page(),Re=x('<div class="height_100 column p_lg"><div><div class="display_flex gap_sm align_items_center"><h1 class="mb_lg"> </h1></div> <div class="display_flex width_100 justify_content_space_between gap_sm mb_lg"><div class="display_flex gap_sm"><button type="button" class="color_a">save</button> <button type="button" class="plain" title="Preview page"><!>&nbsp; preview</button></div> <button type="button" class="color_c"><!>&nbsp; delete</button></div></div> <div class="panel p_md mb_md"><div class="display_flex gap_sm"><div class="flex_1"><label>page title <input type="text" class="width_100" placeholder="page title"/></label></div> <div class="flex_1"><label>page path <input type="text" class="width_100" placeholder="/page-path"/></label></div></div></div> <div class="editor_area svelte-jqr1x4"><div class="panel p_md content_area svelte-jqr1x4"><textarea class="width_100 height_100 markdown_editor svelte-jqr1x4"></textarea></div> <div class="panel p_md preview_area svelte-jqr1x4"><div class="markdown_preview svelte-jqr1x4"><!></div></div></div></div>'),Te=x('<div class="editor_layout svelte-jqr1x4"><!> <!> <div class="editor_content svelte-jqr1x4"><!></div></div>');function Xe(b,o){ne(o,!0);const _=ke.get(),h=Ge.get(),r=U(()=>_.current_page_viewmodel);let j=me(!1);const w=U(()=>_.current_project);var C=pe(),re=Q(C);{var se=v=>{var l=Ye();let m;var d=e(l),y=e(d);$(y,()=>a(r)?.formatted_content),t(d);var n=s(d,2);n.__click=[ae,j];var P=e(n);R(P,{get glyph(){return ee}}),t(n),t(l),X(k=>m=he(l,1,"preview_fullscreen svelte-jqr1x4",null,m,k),[()=>({offset_for_sidebar:h.ui.show_sidebar})]),g(v,l)},ie=v=>{var l=Te(),m=e(l);qe(m,{});var d=s(m,2);{var y=i=>{var p=Ae(),c=Q(p);Ee(c,{get project(){return a(w)},section:"pages"});var u=s(c,2);Se(u,{}),g(i,p)};D(d,i=>{a(w)&&i(y)})}var n=s(d,2),P=e(n);{var k=i=>{var p=Re(),c=e(p),u=e(c),F=e(u),_e=e(F,!0);t(F),t(u);var I=s(u,2),q=e(I),E=e(q);E.__click=[De,r];var L=s(E,2);L.__click=[ae,j];var le=e(L);R(le,{get glyph(){return ee}}),Z(),t(L),t(q);var S=s(q,2);S.__click=[He,_,r];var ve=e(S);R(ve,{get glyph(){return xe}}),Z(),t(S),t(I),t(c);var G=s(c,2),N=e(G),H=e(N),O=e(H),V=s(e(O));te(V),t(O),t(H);var W=s(H,2),z=e(W),B=s(e(z));te(B),t(z),t(W),t(N),t(G);var J=s(G,2),Y=e(J),A=e(Y);fe(A),t(Y);var K=s(Y,2),M=e(K),de=e(M);$(de,()=>a(r).formatted_content),t(M),t(K),t(J),t(p),X(()=>{be(_e,a(r).current_page?.title||"Page"),E.disabled=!a(r).has_changes,je(A,"placeholder",`${we} markup`)}),T(V,()=>a(r).title,f=>a(r).title=f),T(B,()=>a(r).path,f=>a(r).path=f),T(A,()=>a(r).content,f=>a(r).content=f),g(i,p)},oe=i=>{Le(i,{})};D(P,i=>{a(r)&&a(w)?i(k):i(oe,!1)})}t(n),t(l),g(v,l)};D(re,v=>{a(j)?v(se):v(ie,!1)})}g(b,C),ce()}ge(["click"]);export{Xe as component};
