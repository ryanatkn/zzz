import"../chunks/DsnmJJEf.js";import{p as pe,e as ce,a as K,b as u,c as me,x as a,L as ue,f as g,d as e,y as H,r as t,s,t as Q,z as ge,n as U,a5 as fe}from"../chunks/-CpFIzHZ.js";import{d as be,s as he}from"../chunks/DzZ7Rzvg.js";import{i as Y}from"../chunks/DH5XRg4H.js";import{c as xe,r as X,s as we}from"../chunks/trDA34-_.js";import{b as z}from"../chunks/DUXOEpA9.js";import{g as je}from"../chunks/CEYWVytG.js";import{r as ye}from"../chunks/D06rzCAg.js";import{M as Z}from"../chunks/CfQ64gqB.js";import{p as Pe}from"../chunks/CXjC9LE7.js";import{P as ke}from"../chunks/B-N0J0-2.js";import{S as qe,P as Ee}from"../chunks/BugsK9ax.js";import{P as Le}from"../chunks/Bt9CeBbY.js";import{i as A,q as $,o as Se,r as Ge}from"../chunks/CIQxfFOX.js";import{f as He}from"../chunks/CjAsNweL.js";var Ye=g('<div><div class="markdown_preview p_lg svelte-jqr1x4"><!></div> <button type="button" class="position_fixed top_0 right_0 icon_button plain border_radius_0" aria-label="close preview" title="close preview"><!></button></div>'),ze=g("<!> <!>",1),Ae=g('<div class="height_100 column p_lg"><div><div class="display_flex gap_sm align_items_center"><h1 class="mb_lg"> </h1></div> <div class="display_flex width_100 justify_content_space_between gap_sm mb_lg"><div class="display_flex gap_sm"><button type="button" class="color_a">save</button> <button type="button" class="plain" title="Preview page"><!>&nbsp; preview</button></div> <button type="button" class="color_c"><!>&nbsp; delete</button></div></div> <div class="panel p_md mb_md"><div class="display_flex gap_sm"><div class="flex_1"><label>page title <input type="text" class="width_100" placeholder="page title"/></label></div> <div class="flex_1"><label>page path <input type="text" class="width_100" placeholder="/page-path"/></label></div></div></div> <div class="editor_area svelte-jqr1x4"><div class="panel p_md content_area svelte-jqr1x4"><textarea class="width_100 height_100 markdown_editor svelte-jqr1x4"></textarea></div> <div class="panel p_md preview_area svelte-jqr1x4"><div class="markdown_preview svelte-jqr1x4"><!></div></div></div></div>'),De=g('<div class="editor_layout svelte-jqr1x4"><!> <!> <div class="editor_content svelte-jqr1x4"><!></div></div>');function Xe(ee,te){pe(te,!0);const f=Pe.get(),ae=He.get(),r=H(()=>f.current_page_viewmodel);let b=ue(!1);const D=()=>{ge(b,!a(b))},re=()=>{const o=f.current_project_viewmodel;!a(r)?.project||!a(r).current_page||!o||confirm("Are you sure you want to delete this page? This action cannot be undone.")&&(o.delete_project_page(a(r).page_id),je(ye(`/projects/${a(r).project_id}/pages`)))},h=H(()=>f.current_project);var M=ce(),se=K(M);{var ie=o=>{var v=Ye();let p;var l=e(v),x=e(l);{let j=H(()=>a(r)?.content??"");Z(x,{get content(){return a(j)}})}t(l);var _=s(l,2);_.__click=D;var w=e(_);A(w,{get glyph(){return $}}),t(_),t(v),Q(()=>p=xe(v,1,"preview_fullscreen svelte-jqr1x4",null,p,{offset_for_sidebar:ae.ui.show_sidebar})),u(o,v)},oe=o=>{var v=De(),p=e(v);ke(p,{});var l=s(p,2);{var x=i=>{var d=ze(),n=K(d);qe(n,{get project(){return a(h)},section:"pages"});var c=s(n,2);Le(c,{}),u(i,d)};Y(l,i=>{a(h)&&i(x)})}var _=s(l,2),w=e(_);{var j=i=>{var d=Ae(),n=e(d),c=e(n),R=e(c),le=e(R,!0);t(R),t(c);var T=s(c,2),y=e(T),P=e(y);P.__click=()=>a(r).save_page();var k=s(P,2);k.__click=D;var _e=e(k);A(_e,{get glyph(){return $}}),U(),t(k),t(y);var q=s(y,2);q.__click=re;var de=e(q);A(de,{get glyph(){return Se}}),U(),t(q),t(T),t(n);var E=s(n,2),C=e(E),L=e(C),F=e(L),I=s(e(F));X(I),t(F),t(L);var N=s(L,2),O=e(N),V=s(e(O));X(V),t(O),t(N),t(C),t(E);var W=s(E,2),S=e(W),G=e(S);fe(G),t(S);var B=s(S,2),J=e(B),ne=e(J);Z(ne,{get content(){return a(r).content}}),t(J),t(B),t(W),t(d),Q(()=>{he(le,a(r).current_page?.title||"Page"),P.disabled=!a(r).has_changes,we(G,"placeholder",`${Ge} markup`)}),z(I,()=>a(r).title,m=>a(r).title=m),z(V,()=>a(r).path,m=>a(r).path=m),z(G,()=>a(r).content,m=>a(r).content=m),u(i,d)},ve=i=>{Ee(i,{})};Y(w,i=>{a(r)&&a(h)?i(j):i(ve,!1)})}t(_),t(v),u(o,v)};Y(se,o=>{a(b)?o(ie):o(oe,!1)})}u(ee,M),me()}be(["click"]);export{Xe as component};
