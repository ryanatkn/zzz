import"../chunks/DsnmJJEf.js";import{p as rt,f as u,d as a,s,r as e,t as W,x as t,b as p,L as tt,z as V,n as C,c as st,y as et,a as at,e as pt}from"../chunks/-CpFIzHZ.js";import{d as ot,s as F,e as mt}from"../chunks/DzZ7Rzvg.js";import{i as E}from"../chunks/DH5XRg4H.js";import{r as I,e as it,i as ut}from"../chunks/trDA34-_.js";import{b as N}from"../chunks/DUXOEpA9.js";import{s as bt}from"../chunks/V2q5a4YM.js";import{p as gt}from"../chunks/CXjC9LE7.js";import{P as ht}from"../chunks/B-N0J0-2.js";import{S as ft,P as xt}from"../chunks/BugsK9ax.js";import{R as kt}from"../chunks/CXUZfZjY.js";import{i as U,o as X,j as yt}from"../chunks/CIQxfFOX.js";import{b as wt}from"../chunks/BiJ5jRlW.js";import{p as jt}from"../chunks/Rk-Dv8br.js";var Lt=u('<span class="chip color_e display_flex align_items_center svelte-4krhx6"> <button type="button" class="icon_button plain font_size_xs ml_xs" title="Remove tag"><!></button></span>'),Pt=u(`<div class="panel p_sm mb_md"><div class="mb_sm"><label><span class="display_block mb_xs">Path</span> <input type="text" class="width_100" placeholder="./path/to/repo/checkout"/></label></div> <div class="mb_sm"><label><span class="display_block mb_xs">Label</span> <input type="text" class="width_100" placeholder="description (e.g. 'development', 'some-feature-branch', 'some-bug-repro')"/></label></div> <div class="mb_sm"><span class="display_block mb_xs">Tags</span> <div class="display_flex flex_wrap_wrap gap_xs mb_xs"></div> <div class="display_flex gap_xs"><input type="text" placeholder="new tag" class="flex_1"/> <button type="button">add tag</button></div></div> <div class="display_flex justify_content_end"><button type="button" class="color_c"><!>&nbsp; delete checkout</button></div></div>`);function St(q,v){rt(v,!0);const m=jt(v,"checkout",7);let r=tt(""),y=tt(void 0);var w=Pt(),b=a(w),h=a(b),j=s(a(h),2);I(j),e(h),e(b);var f=s(b,2),z=a(f),L=s(a(z),2);I(L),e(z),e(f);var P=s(f,2),S=s(a(P),2);it(S,21,()=>m().tags,ut,(n,T,Y)=>{var R=Lt(),x=a(R),k=s(x);k.__click=()=>v.on_remove_tag(v.index,Y);var B=a(k);U(B,{get glyph(){return X}}),e(k),e(R),W(()=>F(x,`${t(T)??""} `)),p(n,R)}),e(S);var H=s(S,2),o=a(H);I(o),wt(o,n=>V(y,n),()=>t(y));var l=s(o,2);l.__click=()=>{if(!t(r)){t(y)?.focus();return}v.on_add_tag(v.index,t(r)),V(r,"")},e(H),e(P);var _=s(P,2),d=a(_);d.__click=()=>v.on_remove(v.index);var D=a(d);U(D,{get glyph(){return X}}),C(),e(d),e(_),e(w),N(j,()=>m().path,n=>m().path=n),N(L,()=>m().label,n=>m().label=n),N(o,()=>t(r),n=>V(r,n)),p(q,w),st()}ot(["click"]);var Dt=u("<!> <!>",1),Rt=u("<p><small> </small> <br/> <small> </small></p>"),Gt=u('<p class="mb_md">no checkouts yet</p>'),Et=u('<button type="button" class="color_c"><!>&nbsp; delete repo</button>'),zt=u(`<div class="p_lg"><h1 class="mb_lg">edit repo</h1> <div class="panel p_md width_upto_md"><form><div class="mb_lg"><label><h3 class="mt_0 mb_sm">Git url</h3> <input type="text" class="width_100"/></label> <p>enter the git URL, e.g. https://github.com/username/repo or
								git@github.com:username/repo.git</p></div> <!> <div class="mb_lg"><h3 class="mt_0 mb_sm">checkouts</h3> <!> <div class="mt_md"><button type="button" class="color_b"><!>&nbsp; add checkout</button></div></div> <div class="width_100 display_flex justify_content_space_between gap_sm"><div><button type="submit" class="color_a"> </button></div> <!></div></form></div></div>`),Ht=u('<div class="repo_layout svelte-15gkc4u"><!> <!> <div class="repo_content svelte-15gkc4u"><!></div></div>');function Qt(q,v){rt(v,!0);const m=gt.get(),r=et(()=>m.current_repos_viewmodel),y=(o,l)=>{if(!t(r)||!l.trim())return;const _=t(r).checkouts[o];_&&!_.tags.includes(l)&&_.tags.push(l)},w=(o,l)=>{if(!t(r))return;const _=t(r).checkouts[o];_&&_.tags.splice(l,1)},b=et(()=>m.current_project);var h=Ht(),j=a(h);ht(j,{});var f=s(j,2);{var z=o=>{var l=Dt(),_=at(l);ft(_,{get project(){return t(b)},section:"repos"});var d=s(_,2);kt(d,{}),p(o,l)};E(f,o=>{t(b)&&o(z)})}var L=s(f,2),P=a(L);{var S=o=>{var l=zt(),_=s(a(l),2),d=a(_),D=a(d),n=a(D),T=s(a(n),2);I(T),e(n),C(2),e(D);var Y=s(D,2);{var R=i=>{var c=Rt(),g=a(c),G=a(g);e(g);var A=s(g,4),O=a(A);e(A),e(c),W((Q,dt)=>{F(G,`created ${Q??""}`),F(O,`updated ${dt??""}`)},[()=>new Date(t(r).repo.created).toLocaleString(),()=>new Date(t(r).repo.updated).toLocaleString()]),p(i,c)};E(Y,i=>{t(r).repo&&i(R)})}var x=s(Y,2),k=s(a(x),2);{var B=i=>{var c=Gt();p(i,c)},_t=i=>{var c=pt(),g=at(c);it(g,19,()=>t(r).checkouts,G=>G.id,(G,A,O)=>{St(G,{get checkout(){return t(A)},get index(){return t(O)},on_remove:Q=>t(r).remove_checkout_dir(Q),on_add_tag:y,on_remove_tag:w})}),p(i,c)};E(k,i=>{t(r).checkouts.length===0?i(B):i(_t,!1)})}var Z=s(k,2),J=a(Z);J.__click=()=>t(r).add_checkout_dir();var lt=a(J);U(lt,{get glyph(){return yt}}),C(),e(J),e(Z),e(x);var $=s(x,2),K=a($),M=a(K),ct=a(M,!0);e(M),e(K);var nt=s(K,2);{var vt=i=>{var c=Et();c.__click=()=>t(r).remove_repo();var g=a(c);U(g,{get glyph(){return X}}),C(),e(c),p(i,c)};E(nt,i=>{t(r).repo&&i(vt)})}e($),e(d),e(_),e(l),W(()=>{M.disabled=t(r).repo&&!t(r).has_changes,F(ct,t(r).repo?"save changes":"add repo")}),mt("submit",d,i=>{bt(i),t(r).save_repo_settings()}),N(T,()=>t(r).git_url,i=>t(r).git_url=i),p(o,l)},H=o=>{xt(o,{})};E(P,o=>{t(b)&&t(r)?o(S):o(H,!1)})}e(L),e(h),p(q,h),st()}ot(["click"]);export{Qt as component};
