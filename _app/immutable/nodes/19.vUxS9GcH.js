import"../chunks/DsnmJJEf.js";import{p as W,f as m,a as P,d as i,r as s,s as n,x as r,y as f,b as l,t as H,n as z,c as Z,e as S,h as ea}from"../chunks/vp8LXHGR.js";import{d as $,c as ta,s as C}from"../chunks/9dtTqLgI.js";import{i as h}from"../chunks/DBFmjg--.js";import{e as oa,s as U}from"../chunks/CQG0N3Nc.js";import{A as V}from"../chunks/Bbs9L9LJ.js";import{P as ra}from"../chunks/5N5RmXJQ.js";import{r as Q}from"../chunks/C8wFsrNC.js";import{p as la}from"../chunks/Bz2mEZ80.js";import{M as sa}from"../chunks/toluIVx3.js";import{M as da,P as ia}from"../chunks/Cn9X7joC.js";import{i as L,c as na,t as ma,j as va,p as _a,u as ca}from"../chunks/bNKGQNGH.js";import{f as aa}from"../chunks/aLbyw3SX.js";import{O as ua}from"../chunks/hJze1bbz.js";var fa=m('<h1 class="mb_md"> </h1>'),ha=m("<h2><!></h2>"),ga=m('<span class="font_size_md color_c_5 ml_sm"><!> </span>'),pa=m("<!> not",1),ba=m('<div class="mb_lg"><!> downloaded</div>'),xa=m('<small class="chip font_weight_400"> </small>'),wa=m('<ul class="unstyled display_flex gap_xs"></ul>'),ya=m(`<aside class="mt_xl3 width_upto_md">⚠️ This should show model info, but the APIs for ChatGPT and Claude do not provide metadata
			like context window size, output token limit, and other details. Gemini however does. It looks
			like we'll have to maintain hardcoded metadata for models, probably extending what we can
			retrieve from each API.</aside> <section class="display_flex gap_xs"><button type="button" class="color_d"><!>&nbsp; create a new chat</button></section>`,1),Pa=m('<section class="row mb_xl3"><div class="glyph_container svelte-labqpb"><!></div> <div class="pl_xl"><!> <div class="ml_sm mb_md"><!> <!></div> <!> <!></div></section> <!>',1);function ka(T,a){W(a,!0);const v=aa.get();ta(async()=>{if(a.model.provider_name==="ollama"){if(!v.lookup_provider_status("ollama")?.available)return;a.model.needs_ollama_details&&await v.api.ollama_show({model:a.model.name})}});const k=f(()=>la.url.pathname===Q(`/models/${a.model.name}`));{let b=f(()=>({class:"panel p_lg",...a.attrs}));da(T,{tag:"div",get attrs(){return r(b)},get model(){return a.model},children:(j,D)=>{var R=Pa(),M=P(R),A=i(M),G=i(A);L(G,{get glyph(){return na},size:"var(--icon_size_xl)"}),s(A);var Y=n(A,2),O=i(Y);{var q=e=>{var t=fa(),o=i(t,!0);s(t),H(()=>C(o,a.model.name)),l(e,t)},g=e=>{var t=ha(),o=i(t);sa(o,{get model(){return a.model}}),s(t),l(e,t)};h(O,e=>{r(k)?e(q):e(g,!1)})}var x=n(O,2),E=i(x);ia(E,{get provider(){return a.model.provider},icon:"svg",class:"font_size_lg"});var X=n(E,2);{var B=e=>{var t=ga(),o=i(t);L(o,{get glyph(){return ma}});var d=n(o);s(t),H(()=>C(d,` ${(a.model.provider.status&&!a.model.provider.status.available?a.model.provider.status.error:"unavailable")??""}`)),l(e,t)};h(X,e=>{a.model.provider&&!a.model.provider.available&&e(B)})}s(x);var u=n(x,2);{var w=e=>{var t=ba(),o=i(t);{var d=c=>{L(c,{get glyph(){return _a}})},_=c=>{var K=pa(),N=P(K);L(N,{get glyph(){return ca}}),z(),l(c,K)};h(o,c=>{a.model.downloaded?c(d):c(_,!1)})}z(),s(t),l(e,t)};h(u,e=>{a.model.downloaded!==void 0&&e(w)})}var I=n(u,2);{var y=e=>{var t=wa();oa(t,20,()=>a.model.tags,o=>o,(o,d)=>{var _=xa(),c=i(_,!0);s(_),H(()=>C(c,d)),l(o,_)}),s(t),l(e,t)};h(I,e=>{a.model.tags.length&&e(y)})}s(Y),s(M);var F=n(M,2);{var p=e=>{ua(e,{get model(){return a.model},onshow:()=>v.api.ollama_show({model:a.model.name}),ondelete:async o=>{await v.ollama.delete(o.name)},header:o=>{},$$slots:{header:!0}})},J=e=>{var t=ya(),o=n(P(t),2),d=i(o);d.__click=()=>v.chats.add(void 0,!0).add_thread(a.model);var _=i(d);L(_,{get glyph(){return va}}),z(),s(d),s(o),l(e,t)};h(F,e=>{a.model.provider_name==="ollama"?e(p):e(J,!1)})}l(j,R)},$$slots:{default:!0}})}Z()}$(["click"]);var Ma=m(' <button type="button" class="inline color_f">create it</button> or see the <a>models</a> or <a>providers</a>',1),Aa=m('<div class="p_sm"><!></div>');function qa(T,a){W(a,!0);const v=aa.get(),k=f(()=>a.params.slug),b=f(()=>v.models.find_by_name(r(k))),j=f(()=>v.ollama),D=f(()=>r(j).list_status),R=f(()=>!r(b)&&(r(D)==="initial"||r(D)==="pending")),M=f(()=>!r(b)&&r(D)==="failure"),A=f(()=>v.ollama.list_error);var G=Aa(),Y=i(G);{var O=g=>{ra(g,{})},q=g=>{var x=S(),E=P(x);{var X=u=>{V(u,{status:"error",children:(w,I)=>{z();var y=ea();H(()=>C(y,`error loading models: ${r(A)??""}`)),l(w,y)},$$slots:{default:!0}})},B=u=>{var w=S(),I=P(w);{var y=p=>{ka(p,{get model(){return r(b)}})},F=p=>{V(p,{status:"error",children:(J,e)=>{z();var t=Ma(),o=P(t),d=n(o);d.__click=()=>v.models.add({name:r(k),provider_name:"ollama"});var _=n(d,2),c=n(_,2);H((K,N)=>{C(o,`no model found with name "${r(k)??""}", maybe `),U(_,"href",K),U(c,"href",N)},[()=>Q("/models"),()=>Q("/providers")]),l(J,t)},$$slots:{default:!0}})};h(I,p=>{r(b)?p(y):p(F,!1)},!0)}l(u,w)};h(E,u=>{r(M)?u(X):u(B,!1)},!0)}l(g,x)};h(Y,g=>{r(R)?g(O):g(q,!1)})}s(G),l(T,G),Z()}$(["click"]);export{qa as component};
