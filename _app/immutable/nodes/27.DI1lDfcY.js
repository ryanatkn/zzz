import"../chunks/DsnmJJEf.js";import{p as st,f as u,d as a,s as r,r as e,t as W,x as t,b as p,I as tt,z as V,n as A,c as rt,y as et,a as at,e as pt}from"../chunks/vp8LXHGR.js";import{d as ot,s as C,e as mt}from"../chunks/pja_h9dl.js";import{p as ut,i as E}from"../chunks/Dl5udER_.js";import{r as F,e as it,i as bt}from"../chunks/Bs1WACQy.js";import{b as N}from"../chunks/ovaY63up.js";import{s as gt}from"../chunks/V2q5a4YM.js";import{p as ht}from"../chunks/DQC5e9Cu.js";import{P as ft}from"../chunks/Bk0sH7xd.js";import{S as xt,P as kt}from"../chunks/BBlV8c8H.js";import{R as yt}from"../chunks/D0WzCioN.js";import{i as U,o as X,j as wt}from"../chunks/CtEBPyZ8.js";import{b as jt}from"../chunks/CMd_zdKF.js";var Lt=u('<span class="chip color_e display_flex align_items_center svelte-4krhx6"> <button type="button" class="icon_button plain font_size_xs ml_xs" title="Remove tag"><!></button></span>'),Pt=u(`<div class="panel p_sm mb_md"><div class="mb_sm"><label><span class="display_block mb_xs">Path</span> <input type="text" class="width_100" placeholder="./path/to/repo/checkout"/></label></div> <div class="mb_sm"><label><span class="display_block mb_xs">Label</span> <input type="text" class="width_100" placeholder="description (e.g. 'development', 'some-feature-branch', 'some-bug-repro')"/></label></div> <div class="mb_sm"><span class="display_block mb_xs">Tags</span> <div class="display_flex flex_wrap_wrap gap_xs mb_xs"></div> <div class="display_flex gap_xs"><input type="text" placeholder="new tag" class="flex_1"/> <button type="button">add tag</button></div></div> <div class="display_flex justify_content_end"><button type="button" class="color_c"><!>&nbsp; delete checkout</button></div></div>`);function St(q,v){st(v,!0);const m=ut(v,"checkout",7);let s=tt(""),y=tt(void 0);var w=Pt(),b=a(w),h=a(b),j=r(a(h),2);F(j),e(h),e(b);var f=r(b,2),z=a(f),L=r(a(z),2);F(L),e(z),e(f);var P=r(f,2),S=r(a(P),2);it(S,21,()=>m().tags,bt,(n,I,T)=>{var R=Lt(),x=a(R),k=r(x);k.__click=()=>v.on_remove_tag(v.index,T);var B=a(k);U(B,{get glyph(){return X}}),e(k),e(R),W(()=>C(x,`${t(I)??""} `)),p(n,R)}),e(S);var H=r(S,2),o=a(H);F(o),jt(o,n=>V(y,n),()=>t(y));var l=r(o,2);l.__click=()=>{if(!t(s)){t(y)?.focus();return}v.on_add_tag(v.index,t(s)),V(s,"")},e(H),e(P);var _=r(P,2),d=a(_);d.__click=()=>v.on_remove(v.index);var D=a(d);U(D,{get glyph(){return X}}),A(),e(d),e(_),e(w),N(j,()=>m().path,n=>m().path=n),N(L,()=>m().label,n=>m().label=n),N(o,()=>t(s),n=>V(s,n)),p(q,w),rt()}ot(["click"]);var Dt=u("<!> <!>",1),Rt=u("<p><small> </small> <br/> <small> </small></p>"),Gt=u('<p class="mb_md">no checkouts yet</p>'),Et=u('<button type="button" class="color_c"><!>&nbsp; delete repo</button>'),zt=u(`<div class="p_lg"><h1 class="mb_lg">edit repo</h1> <div class="panel p_md width_upto_md"><form><div class="mb_lg"><label><h3 class="mt_0 mb_sm">Git url</h3> <input type="text" class="width_100"/></label> <p>enter the git URL, e.g. https://github.com/username/repo or
								git@github.com:username/repo.git</p></div> <!> <div class="mb_lg"><h3 class="mt_0 mb_sm">checkouts</h3> <!> <div class="mt_md"><button type="button" class="color_b"><!>&nbsp; add checkout</button></div></div> <div class="width_100 display_flex justify_content_space_between gap_sm"><div><button type="submit" class="color_a"> </button></div> <!></div></form></div></div>`),Ht=u('<div class="repo_layout svelte-15gkc4u"><!> <!> <div class="repo_content svelte-15gkc4u"><!></div></div>');function Ot(q,v){st(v,!0);const m=ht.get(),s=et(()=>m.current_repos_viewmodel),y=(o,l)=>{if(!t(s)||!l.trim())return;const _=t(s).checkouts[o];_&&!_.tags.includes(l)&&_.tags.push(l)},w=(o,l)=>{if(!t(s))return;const _=t(s).checkouts[o];_&&_.tags.splice(l,1)},b=et(()=>m.current_project);var h=Ht(),j=a(h);ft(j,{});var f=r(j,2);{var z=o=>{var l=Dt(),_=at(l);xt(_,{get project(){return t(b)},section:"repos"});var d=r(_,2);yt(d,{}),p(o,l)};E(f,o=>{t(b)&&o(z)})}var L=r(f,2),P=a(L);{var S=o=>{var l=zt(),_=r(a(l),2),d=a(_),D=a(d),n=a(D),I=r(a(n),2);F(I),e(n),A(2),e(D);var T=r(D,2);{var R=i=>{var c=Rt(),g=a(c),G=a(g);e(g);var Y=r(g,4),O=a(Y);e(Y),e(c),W((Q,dt)=>{C(G,`created ${Q??""}`),C(O,`updated ${dt??""}`)},[()=>new Date(t(s).repo.created).toLocaleString(),()=>new Date(t(s).repo.updated).toLocaleString()]),p(i,c)};E(T,i=>{t(s).repo&&i(R)})}var x=r(T,2),k=r(a(x),2);{var B=i=>{var c=Gt();p(i,c)},_t=i=>{var c=pt(),g=at(c);it(g,19,()=>t(s).checkouts,G=>G.id,(G,Y,O)=>{St(G,{get checkout(){return t(Y)},get index(){return t(O)},on_remove:Q=>t(s).remove_checkout_dir(Q),on_add_tag:y,on_remove_tag:w})}),p(i,c)};E(k,i=>{t(s).checkouts.length===0?i(B):i(_t,!1)})}var Z=r(k,2),J=a(Z);J.__click=()=>t(s).add_checkout_dir();var lt=a(J);U(lt,{get glyph(){return wt}}),A(),e(J),e(Z),e(x);var $=r(x,2),K=a($),M=a(K),ct=a(M,!0);e(M),e(K);var nt=r(K,2);{var vt=i=>{var c=Et();c.__click=()=>t(s).remove_repo();var g=a(c);U(g,{get glyph(){return X}}),A(),e(c),p(i,c)};E(nt,i=>{t(s).repo&&i(vt)})}e($),e(d),e(_),e(l),W(()=>{M.disabled=t(s).repo&&!t(s).has_changes,C(ct,t(s).repo?"save changes":"add repo")}),mt("submit",d,i=>{gt(i),t(s).save_repo_settings()}),N(I,()=>t(s).git_url,i=>t(s).git_url=i),p(o,l)},H=o=>{kt(o,{})};E(P,o=>{t(b)&&t(s)?o(S):o(H,!1)})}e(L),e(h),p(q,h),rt()}ot(["click"]);export{Ot as component};
