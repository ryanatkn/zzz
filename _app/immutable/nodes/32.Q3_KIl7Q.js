import"../chunks/DsnmJJEf.js";import{f as m,d as t,s as o,r as a,t as x,b as n,e as be,a as de,p as fe,x as r,y as D,c as pe,n as T,h as ie,a2 as Ke}from"../chunks/vp8LXHGR.js";import{a as $e,s as Y,d as Oe,f as ea}from"../chunks/pja_h9dl.js";import{i as f,p as He}from"../chunks/Dl5udER_.js";import{A as aa}from"../chunks/DcDoHbur.js";import{b as We,c as Pe,r as xe,e as we,s as ge,d as Be,a as ta}from"../chunks/Bs1WACQy.js";import{p as Je,r as la}from"../chunks/Dz-m46CK.js";import{p as oa}from"../chunks/CvqXH3js.js";import{f as ia}from"../chunks/Bqox2sDL.js";import{M as na,a as sa}from"../chunks/Cwf40Qcy.js";import{i as J,f as ra,o as _a,y as Re,j as ze,m as De,p as da,u as ca,J as Ue,h as Ve,r as he,E as va,k as ma,K as ua,n as Se,d as fa}from"../chunks/CtEBPyZ8.js";import{E as Me}from"../chunks/C4hxwCfw.js";import{t as Le,s as je,c as pa}from"../chunks/-QCXjV-k.js";import{P as Ne}from"../chunks/DQQ4WCVB.js";import{c as Xe,b as ye}from"../chunks/ovaY63up.js";import{E as Te}from"../chunks/BB5gVk_b.js";import{a as ga}from"../chunks/DTG56X07.js";import{O as ba,C as ha}from"../chunks/D02JT90l.js";import{f as Ge,O as Ye}from"../chunks/Dt1T9vKA.js";import{O as ya}from"../chunks/CFTGplmp.js";import{f as xa}from"../chunks/DM4ztRtC.js";import{M as wa}from"../chunks/BgyAklmZ.js";var ka=m('<small class="width_xl4 text_align_right"> </small>'),Pa=m('<div class="display_flex align_items_center gap_sm"><!> <div class="flex_1 bg_5 border_radius_xs overflow_hidden"><div class="bg_a_5 height_100"></div></div></div>');function La(I,e){var l=Pa(),A=t(l);{var p=d=>{var y=be(),O=de(y);$e(O,()=>e.text),n(d,y)},g=d=>{var y=ka(),O=t(y);a(y),x(()=>Y(O,`${e.value??""}%`)),n(d,y)};f(A,d=>{e.text?d(p):d(g,!1)})}var h=o(A,2);We(h,"",{},{height:"var(--progress_bar_height, 6px)"});var w=t(h);let u;a(h),a(l),x(()=>u=We(w,"",u,{width:`${e.value??""}%`})),n(I,l)}var Oa=m('<div class="font_size_sm flex_1 font_family_mono ellipsis"><div class="ellipsis"> </div></div>'),Ea=m('<div class="font_size_sm color_c_5 font_weight_500"> </div>'),ja=m('<div class="p_sm pt_0"><!></div>'),Ha=m('<li class="py_xs3"><div><div class="display_flex justify_content_space_between align_items_center p_sm"><div class="display_flex gap_md align_items_center"><!> <!> <div class="font_size_sm font_weight_600"> </div> <!> <!></div> <span class="font_size_sm"> </span></div> <!></div></li>');function qe(I,e){fe(e,!0);const l=D(()=>e.action.action_event_data),A=D(()=>{switch(e.action.method){case"ollama_pull":return De;case"ollama_create":return ze;case"ollama_copy":return Re;case"ollama_delete":return _a;case"ollama_list":case"ollama_show":case"ollama_ps":default:return ra}}),p=D(()=>{switch(r(l)?.step||"initial"){case"handled":return"color_b";case"failed":return"color_c";case"handling":return"color_d";default:return""}}),g=D(()=>{const i=r(l)?.input;if(i&&typeof i=="object"&&"model"in i)return i.model}),h=D(()=>{const i=r(l)?.error;if(i&&typeof i=="object"&&"message"in i)return i.message}),w=D(()=>{const i=r(l)?.progress;if(i&&typeof i=="object"&&"completed"in i&&"total"in i){const s=i.completed,_=i.total;if(typeof s=="number"&&typeof _=="number"&&_>0)return Math.round(s/_*100)}return null});var u=Ha(),d=t(u),y=t(d),O=t(y),H=t(O);{var S=i=>{Ne(i,{})},L=i=>{{let s=D(()=>e.action.success?da:ca),_=D(()=>e.action.failed?"color_c_5":void 0);J(i,{get glyph(){return r(s)},get class(){return r(_)}})}};f(H,i=>{e.action.pending?i(S):i(L,!1)})}var k=o(H,2);J(k,{get glyph(){return r(A)}});var M=o(k,2),G=t(M,!0);a(M);var R=o(M,2);{var N=i=>{var s=Oa(),_=t(s),j=t(_,!0);a(_),a(s),x(()=>Y(j,r(g))),n(i,s)};f(R,i=>{r(g)&&i(N)})}var U=o(R,2);{var V=i=>{var s=Ea(),_=t(s,!0);a(s),x(()=>Y(_,r(h))),n(i,s)};f(U,i=>{e.action.failed&&r(h)&&i(V)})}a(O);var X=o(O,2),W=t(X,!0);a(X),a(y);var q=o(y,2);{var $=i=>{var s=ja(),_=t(s);La(_,{get value(){return r(w)}}),a(s),n(i,s)};f(q,i=>{r(w)!==null&&i($)})}a(d),a(u),x(i=>{Pe(d,1,`border_radius_xs ${e.action.pending?"bg_2":"bg_1"} ${r(p)??""}`),Y(G,e.action.method),Y(W,i)},[()=>ga(e.action.updated_date.getTime())]),Le(3,u,()=>je),n(I,u),pe()}var Ma=m("<p><small> </small></p>"),Ga=m('<ul class="unstyled"></ul>'),Aa=m('<div class="panel p_md width_upto_md"><div class="display_flex justify_content_space_between align_items_center mb_md"><h4 class="mt_0 mb_0">action history</h4> <div class="display_flex gap_xs align_items_center"><label class="display_flex gap_xs align_items_center mb_0"><input type="checkbox" class="compact"/> <small>show read actions</small></label> <button type="button" class="icon_button plain" title="clear completed actions"><!></button></div></div> <!></div>');function Ca(I,e){fe(e,!0);const l=He(e,"ollama",7),A=()=>{const L=l().completed_actions.map(k=>k.id);l().app.actions.items.remove_many(L)};var p=Aa(),g=t(p),h=o(t(g),2),w=t(h),u=t(w);xe(u),T(2),a(w);var d=o(w,2);d.__click=A;var y=t(d);J(y,{get glyph(){return Ue}}),a(d),a(h),a(g);var O=o(g,2);{var H=L=>{var k=Ma(),M=t(k),G=t(M);a(M),a(k),x(()=>Y(G,`no action history${l().show_read_actions?"":", showing only write actions"}`)),n(L,k)},S=L=>{var k=Ga();we(k,21,()=>l().filtered_actions,M=>M.id,(M,G)=>{qe(M,{get action(){return r(G)}})}),a(k),n(L,k)};f(O,L=>{l().filtered_actions.length===0?L(H):L(S,!1)})}a(p),x(()=>d.disabled=l().completed_actions.length===0),Xe(u,()=>l().show_read_actions,L=>l().show_read_actions=L),n(I,p),pe()}Oe(["click"]);var Ya=m('<button type="button" class="icon_button plain"><!></button>'),Ra=m('Want to <button type="button" class="inline compact color_a">pull a model</button>?',1),za=m('<div class="row gap_sm"><button type="button" class="flex_shrink_0">reset to default</button> <small class="font_family_mono"> </small></div>'),Da=m('<small class="font_family_mono"> </small>'),Ta=m("<div><!></div>"),Ia=m('<div class="panel p_md"><header class="display_flex justify_content_space_between align_items_center mb_md"><h3 class="mt_0 mb_0"><!> configure</h3> <!></header> <section class="width_upto_md display_flex flex_direction_column gap_lg"><p>Ollama is a local LLM provider. <!></p> <div class="display_flex flex_direction_column gap_md"><fieldset><label><div class="title mb_xs">Ollama host url</div> <input type="text" class="plain flex_1"/></label></fieldset> <div class="row gap_xs justify_content_space_between"><button type="button" class="justify_content_start"><!> <span class="ml_sm"><!></span></button> <!> <div class="display_flex gap_sm"><button type="button" class="plain"><!>&nbsp; clear details cache <!></button></div></div> <!></div> <!> <!></section></div>');function Sa(I,e){fe(e,!0);const l=He(e,"ollama",7),A=Ge.get(),{capabilities:p}=A,g=D(()=>l().models.filter(v=>v.ollama_show_response_loaded)),h=D(()=>r(g).length),w=D(()=>p.ollama.error_message);var u=Ia(),d=t(u),y=t(d),O=t(y);J(O,{get glyph(){return Ve}}),T(),a(y);var H=o(y,2);{var S=v=>{var P=Ya();P.__click=function(...C){e.onback?.apply(this,C)};var b=t(P);J(b,{get glyph(){return va}}),a(P),x(()=>ge(P,"title",`back to ${e.last_active_view??""}`)),n(v,P)};f(H,v=>{e.last_active_view&&e.onback&&v(S)})}a(d);var L=o(d,2),k=t(L),M=o(t(k));{var G=v=>{var P=Ra(),b=o(de(P));b.__click=function(...C){e.onshowpull?.apply(this,C)},T(),n(v,P)};f(M,v=>{!r(w)&&p.backend_available&&v(G)})}a(k);var R=o(k,2),N=t(R),U=t(N),V=o(t(U),2);xe(V),V.__input=()=>l().refresh(),a(U),a(N);var X=o(N,2),W=t(X);W.__click=()=>l().refresh();var q=t(W);{let v=D(()=>l().list_status==="success"?ma:ua);J(q,{get glyph(){return r(v)}})}var $=o(q,2),i=t($);{var s=v=>{var P=ie("checking...");n(v,P)},_=v=>{var P=ie("reload");n(v,P)};f(i,v=>{l().list_status==="pending"?v(s):v(_,!1)})}a($),a(W);var j=o(W,2);{var te=v=>{var P=za(),b=t(P);b.__click=async()=>{l().host=Ye,await l().refresh()};var C=o(b,2),se=t(C,!0);a(C),a(P),x(()=>Y(se,Ye)),Le(3,P,()=>je,()=>({axis:"x"})),n(v,P)};f(j,v=>{l().host!==Ye&&v(te)})}var F=o(j,2),K=t(F);K.__click=()=>l().clear_all_model_details();var le=t(K);J(le,{get glyph(){return Ue}});var ce=o(le,2);{var E=v=>{var P=ie();x(()=>Y(P,`(${r(h)??""})`)),n(v,P)};f(ce,v=>{r(h)&&v(E)})}a(K),a(F),a(X);var c=o(X,2);{var z=v=>{var P=Ta(),b=t(P);Te(b,{children:(C,se)=>{var ne=Da(),ve=t(ne,!0);a(ne),x(()=>Y(ve,r(w))),n(C,ne)},$$slots:{default:!0}}),a(P),Le(3,P,()=>je),n(v,P)};f(c,v=>{r(w)&&v(z)})}a(R);var ae=o(R,2);ba(ae,{get ollama(){return l()}});var Q=o(ae,2);Ca(Q,{get ollama(){return l()}}),a(L),a(u),x(v=>{ge(V,"placeholder",`${he} ${Ye}`),W.disabled=l().list_status==="pending"||!p.backend_available,ge(K,"title",`clear all cached model details (${r(h)??""} item${v??""})`),K.disabled=r(h)===0},[()=>Je(r(h))]),ye(V,()=>l().host,v=>l().host=v),n(I,u),pe()}Oe(["click","input"]);var Na=m('<button type="button" class="compact"> </button>'),Ka=m('<div class="display_flex flex_wrap_wrap gap_xs"></div>'),Wa=m('<button type="button" class="plain">cancel</button>'),Fa=m('<div class="mt_md"><h4 class="mt_0 mb_sm">pull operations</h4> <ul class="unstyled"></ul></div>'),Ba=m('<div class="panel p_md"><header class="display_flex justify_content_space_between align_items_center mb_md"><h3 class="mt_0 mb_0"><!> pull model</h3> <button type="button" class="icon_button plain" title="close"><!></button></header> <div class="width_upto_md display_flex flex_direction_column gap_md"><p>This downloads a builtin model so you can use it locally.</p> <fieldset><label class="display_block mb_xs"><div class="title">model name</div> <input type="text" class="plain width_100"/></label> <p>Enter a model name from the <a href="https://ollama.com/library" target="_blank" rel="noopener noreferrer">Ollama library</a><!></p> <!></fieldset> <label class="display_flex gap_xs align_items_center"><input type="checkbox" class="compact"/> <span>allow insecure connections</span></label> <div class="display_flex gap_md"><button type="button" class="color_a"><!>&nbsp; pull model</button> <!></div> <!> <!></div></div>');function Ja(I,e){fe(e,!0);const l=He(e,"ollama",7),A=Ge.get(),p=D(()=>A.ollama),g=D(()=>r(p).models_not_downloaded),h=D(()=>l().actions.filter(c=>c.method==="ollama_pull")),w=async()=>{e.onclose?.(),await l().pull()},u=c=>{c.key==="Enter"&&l().pull_can_pull?w():c.key==="Escape"&&e.onclose?.()};var d=Ba(),y=t(d),O=t(y),H=t(O);J(H,{get glyph(){return De}}),T(),a(O);var S=o(O,2);S.__click=function(...c){e.onclose?.apply(this,c)};var L=t(S);J(L,{get glyph(){return Se}}),a(S),a(y);var k=o(y,2),M=o(t(k),2),G=t(M),R=o(t(G),2);xe(R),R.__keydown=u,a(G);var N=o(G,2),U=o(t(N),2);{var V=c=>{var z=ie(" or choose from the available models:");n(c,z)},X=c=>{var z=ie(".");n(c,z)};f(U,c=>{r(g).length>0?c(V):c(X,!1)})}a(N);var W=o(N,2);{var q=c=>{var z=Ka();we(z,21,()=>r(g),ae=>ae.id,(ae,Q)=>{var v=Na();v.__click=()=>l().pull_model_name=r(Q).name;var P=t(v,!0);a(v),x(b=>{v.disabled=b,Y(P,r(Q).name)},[()=>l().pull_model_name===r(Q).name||l().pull_is_pulling(r(Q).name)]),n(ae,v)}),a(z),n(c,z)};f(W,c=>{r(g).length>0&&c(q)})}a(M);var $=o(M,2),i=t($);xe(i),T(2),a($);var s=o($,2),_=t(s);_.__click=w;var j=t(_);J(j,{get glyph(){return De}}),T(),a(_);var te=o(_,2);{var F=c=>{var z=Wa();z.__click=()=>e.oncancel(),n(c,z)};f(te,c=>{e.oncancel&&c(F)})}a(s);var K=o(s,2);{var le=c=>{Te(c,{children:(z,ae)=>{T();var Q=ie("this model is already downloaded");n(z,Q)},$$slots:{default:!0}})};f(K,c=>{l().pull_already_downloaded&&c(le)})}var ce=o(K,2);{var E=c=>{var z=Fa(),ae=o(t(z),2);we(ae,21,()=>r(h),Q=>Q.id,(Q,v)=>{qe(Q,{get action(){return r(v)}})}),a(ae),a(z),n(c,z)};f(ce,c=>{r(h).length>0&&c(E)})}a(k),a(d),x(()=>{ge(R,"placeholder",`${he} e.g., llama3.1, mistral, codellama`),_.disabled=!l().pull_can_pull}),ye(R,()=>l().pull_model_name,c=>l().pull_model_name=c),Xe(i,()=>l().pull_insecure,c=>l().pull_insecure=c),n(I,d),pe()}Oe(["click","keydown"]);var Ua=m("<option> </option>"),Va=m('<select class="plain width_100"><option>-- select base model --</option><!></select>'),Xa=m('<input type="text" class="plain width_100"/>'),qa=m(`<div class="panel p_md"><header class="display_flex justify_content_space_between align_items_center mb_md"><h3 class="mt_0 mb_0"><!> create model</h3> <button type="button" class="icon_button plain" title="close"><!></button></header> <section class="width_upto_md display_flex flex_direction_column gap_md"><p>This creates a new custom modelfile, to download a builtin model see <button type="button" class="inline compact">pull model</button>.</p> <fieldset><label><div class="title mb_xs">new model name</div> <input type="text" class="plain width_100"/></label></fieldset> <fieldset><label><div class="title mb_xs">base model (optional)</div> <!></label> <p>Choose a base model to customize, or leave empty for a completely new model</p></fieldset> <fieldset><label><div class="title mb_xs">system prompt (optional)</div> <textarea class="plain width_100" rows="4"></textarea></label> <p>Define the model's behavior and personality</p></fieldset> <fieldset><label><div class="title mb_xs">template (optional)</div> <textarea class="plain width_100" rows="3"></textarea></label> <p>Custom prompt template using Ollama template syntax</p></fieldset> <div class="display_flex gap_md"><button type="button" class="color_b"><!> </button> <button type="button" class="plain">cancel</button></div> <!></section></div>`);function Qa(I,e){fe(e,!0);const l=He(e,"ollama",7),A=async()=>{await l().create(),e.onclose()},p=E=>{E.key==="Escape"&&e.onclose()};var g=qa(),h=t(g),w=t(h),u=t(w);J(u,{get glyph(){return ze}}),T(),a(w);var d=o(w,2);d.__click=function(...E){e.onclose?.apply(this,E)};var y=t(d);J(y,{get glyph(){return Se}}),a(d),a(h);var O=o(h,2),H=t(O),S=o(t(H));S.__click=function(...E){e.onshowpull?.apply(this,E)},T(),a(H);var L=o(H,2),k=t(L),M=o(t(k),2);xe(M),M.__keydown=p,a(k),a(L);var G=o(L,2),R=t(G),N=o(t(R),2);{var U=E=>{var c=Va(),z=t(c);z.value=z.__value="";var ae=o(z);we(ae,16,()=>l().model_names,Q=>Q,(Q,v)=>{var P=Ua(),b=t(P,!0);a(P);var C={};x(()=>{Y(b,v),C!==(C=v)&&(P.value=(P.__value=v)??"")}),n(Q,P)}),a(c),x(()=>c.disabled=l().create_is_creating),Be(c,()=>l().create_from_model,Q=>l().create_from_model=Q),n(E,c)},V=E=>{var c=Xa();xe(c),c.__keydown=p,x(()=>{ge(c,"placeholder",`${he} base model name`),c.disabled=l().create_is_creating}),ye(c,()=>l().create_from_model,z=>l().create_from_model=z),n(E,c)};f(N,E=>{l().model_names.length>0?E(U):E(V,!1)})}a(R),T(2),a(G);var X=o(G,2),W=t(X),q=o(t(W),2);Ke(q),a(W),T(2),a(X);var $=o(X,2),i=t($),s=o(t(i),2);Ke(s),a(i),T(2),a($);var _=o($,2),j=t(_);j.__click=A;var te=t(j);J(te,{get glyph(){return ze}});var F=o(te);a(j);var K=o(j,2);K.__click=function(...E){e.onclose?.apply(this,E)},a(_);var le=o(_,2);{var ce=E=>{Te(E,{children:(c,z)=>{T();var ae=ie("a model with this name already exists");n(c,ae)},$$slots:{default:!0}})};f(le,E=>{l().create_is_duplicate_name&&E(ce)})}a(O),a(g),x(()=>{ge(M,"placeholder",`${he} my-custom-model`),M.disabled=l().create_is_creating,ge(q,"placeholder",`${he} You are a helpful assistant...`),q.disabled=l().create_is_creating,ge(s,"placeholder",`${he} {{{ .System }}} {{{ .Prompt }}}`),s.disabled=l().create_is_creating,j.disabled=!l().create_can_create||l().create_is_creating,Y(F,` 
				${l().create_is_creating?"creating...":"create model"}`),K.disabled=l().create_is_creating}),ye(M,()=>l().create_model_name,E=>l().create_model_name=E),ye(q,()=>l().create_system_prompt,E=>l().create_system_prompt=E),ye(s,()=>l().create_template,E=>l().create_template=E),n(I,g),pe()}Oe(["click","keydown"]);var Za=m("<option> </option>"),$a=m('<select class="plain width_100"><option>-- select source model --</option><!></select>'),et=m('<input type="text" class="plain width_100"/>'),at=m('<div class="panel p_md"><header class="display_flex justify_content_space_between align_items_center mb_md"><h3 class="mt_0 mb_0"><!> copy model</h3> <button type="button" class="icon_button plain" title="close"><!></button></header> <section class="width_upto_md display_flex flex_direction_column gap_md"><p>Create a copy of the source model with a new name.</p> <fieldset><label><div class="title mb_xs">source model</div> <!></label></fieldset> <fieldset><label><div class="title mb_xs">destination model name</div> <input type="text" class="plain width_100"/></label></fieldset> <div class="display_flex gap_md"><button type="button" class="color_d"><!> </button> <button type="button" class="plain">cancel</button></div> <!></section></div>');function tt(I,e){fe(e,!0);const l=He(e,"ollama",7),A=async()=>{await l().copy(),e.onclose()},p=s=>{s.key==="Enter"&&!l().copy_is_copying&&l().copy_destination_model_changed?A():s.key==="Escape"&&e.onclose()};var g=at(),h=t(g),w=t(h),u=t(w);J(u,{get glyph(){return Re}}),T(),a(w);var d=o(w,2);d.__click=function(...s){e.onclose?.apply(this,s)};var y=t(d);J(y,{get glyph(){return Se}}),a(d),a(h);var O=o(h,2),H=o(t(O),2),S=t(H),L=o(t(S),2);{var k=s=>{var _=$a(),j=t(_);j.value=j.__value="";var te=o(j);we(te,16,()=>l().model_names,F=>F,(F,K)=>{var le=Za(),ce=t(le,!0);a(le);var E={};x(()=>{Y(ce,K),E!==(E=K)&&(le.value=(le.__value=K)??"")}),n(F,le)}),a(_),x(()=>_.disabled=l().copy_is_copying),Be(_,()=>l().copy_source_model,F=>l().copy_source_model=F),n(s,_)},M=s=>{var _=et();xe(_),_.__keydown=p,x(()=>{ge(_,"placeholder",`${he} source model name`),_.disabled=l().copy_is_copying}),ye(_,()=>l().copy_source_model,j=>l().copy_source_model=j),n(s,_)};f(L,s=>{l().model_names.length>0?s(k):s(M,!1)})}a(S),a(H);var G=o(H,2),R=t(G),N=o(t(R),2);xe(N),N.__keydown=p,a(R),a(G);var U=o(G,2),V=t(U);V.__click=A;var X=t(V);J(X,{get glyph(){return Re}});var W=o(X);a(V);var q=o(V,2);q.__click=function(...s){e.onclose?.apply(this,s)},a(U);var $=o(U,2);{var i=s=>{Te(s,{children:(_,j)=>{T();var te=ie("a model with this name already exists");n(_,te)},$$slots:{default:!0}})};f($,s=>{l().copy_is_duplicate_name&&s(i)})}a(O),a(g),x(()=>{ge(N,"placeholder",`${he} new model name`),N.disabled=l().copy_is_copying,V.disabled=!l().copy_destination_model_changed||l().copy_is_copying,Y(W,` 
				${l().copy_is_copying?"copying...":"copy model"}`),q.disabled=l().copy_is_copying}),ye(N,()=>l().copy_destination_model,s=>l().copy_destination_model=s),n(I,g),pe()}Oe(["click","keydown"]);var lt=m('<div><small class="chip">loaded</small></div>'),ot=m("<!> <!>",1);function it(I,e){fe(e,!0);const l=D(()=>e.ollama.running_model_names.has(e.model.name)),A=D(()=>e.ollama.pull_is_pulling(e.model.name));var p=ot(),g=de(p);{var h=d=>{Ne(d,{})};f(g,d=>{r(A)&&d(h)})}var w=o(g,2);{var u=d=>{var y=lt();Le(3,y,()=>pa,()=>({duration:200})),n(d,y)};f(w,d=>{r(l)&&d(u)})}n(I,p),pe()}var nt=m('<div class="font_size_sm"> </div>'),st=m('<button type="button"><div class="display_flex flex_direction_column gap_xs width_100"><div class="display_flex justify_content_space_between align_items_center"><div class="ellipsis font_size_lg"> </div> <!></div> <!></div></button>');function Fe(I,e){fe(e,!0);const l=He(e,"onclick",3,()=>r(p).select(e.model)),A=D(()=>e.model.app),p=D(()=>r(A).ollama),g=D(()=>r(p).manager_selected_view==="model"?r(p).manager_selected_model?.id===e.model.id:r(p).manager_selected_view==="pull"?r(p).pull_model_name===e.model.name:!1);na(I,{get model(){return e.model},children:(h,w)=>{var u=st();let d;u.__click=function(...G){l()?.apply(this,G)};var y=t(u),O=t(y),H=t(O),S=t(H,!0);a(H);var L=o(H,2);it(L,{get model(){return e.model},get ollama(){return r(p)}}),a(O);var k=o(O,2);{var M=G=>{var R=nt(),N=t(R,!0);a(R),x(U=>Y(N,U),[()=>xa(e.model.filesize)]),n(G,R)};f(k,G=>{e.model.filesize&&G(M)})}a(y),a(u),x(()=>{d=Pe(u,1,"menu_item selectable plain text_align_start p_sm border_radius_0 font_weight_400",null,d,{selected:r(g)}),Y(S,e.model.name)}),n(h,u)},$$slots:{default:!0}}),pe()}Oe(["click"]);var rt=m("<span> </span>"),_t=m(" <!>",1),dt=m("<li><!></li>"),ct=m("<li><!></li>"),vt=m('<section><h3 class="mt_xl3 mb_md"> </h3> <menu class="unstyled column"></menu></section>'),mt=m('<section><h3 class="mt_xl3 mb_md"> </h3> <menu class="unstyled column"></menu></section> <!>',1),ut=m('<section class="panel p_md"><p>no models found, <button type="button" class="inline compact">pull a model</button> or install them using the <!></p></section>'),ft=m('<div class="display_block panel p_md"><!></div>'),pt=m('<div class="display_flex height_100"><div class="height_100 overflow_hidden width_upto_sm width_atleast_sm"><div class="height_100 overflow_auto scrollbar_width_thin p_md"><section class="display_flex flex_direction_column gap_md"><div class="display_flex gap_sm align_items_start"><div><div class="column justify_content_center gap_xs p_md"><span class="font_size_lg"> <!></span> <div class="font_family_mono font_size_sm"><!></div></div></div></div> <div class="flex_direction_column gap_sm"><button type="button"><!> <span class="ml_sm">configure</span></button> <button type="button"><!> <span class="ml_sm">pull model</span></button> <button type="button"><!> <span class="ml_sm">create model</span></button> <button type="button"><!> <span class="ml_sm">copy model</span></button></div></section> <!></div></div> <div class="flex_1 height_100 overflow_auto p_md"><!></div></div>');function gt(I,e){fe(e,!0);const l=Ge.get(),{capabilities:A}=l;ea(()=>{e.ollama.refresh();const b=!e.ollama.ps_polling_enabled;return b&&e.ollama.start_ps_polling({immediate:!1}),b?()=>{e.ollama.stop_ps_polling()}:void 0});const p=D(()=>A.ollama),g=D(()=>r(p).status);var h=pt(),w=t(h),u=t(w),d=t(u),y=t(d),O=t(y);let H;var S=t(O),L=t(S),k=t(L),M=o(k);{var G=b=>{Ne(b,{inline:!0,class:"ml_sm"})};f(M,b=>{r(g)==="pending"&&b(G)})}a(L);var R=o(L,2),N=t(R);{var U=b=>{var C=ie();x(()=>Y(C,A.ollama.error_message)),n(b,C)},V=b=>{var C=be(),se=de(C);{var ne=B=>{var oe=ie("backend unavailable");n(B,oe)},ve=B=>{var oe=_t(),re=de(oe),ee=o(re);{var me=Z=>{var _e=rt(),Ee=t(_e);a(_e),x(ke=>Y(Ee,`→ ${ke??""}ms`),[()=>Math.round(e.ollama.list_round_trip_time)]),n(Z,_e)};f(ee,Z=>{e.ollama.list_round_trip_time&&Z(me)})}x(()=>Y(re,`${e.ollama.host??""} `)),n(B,oe)};f(se,B=>{A.backend_available?B(ve,!1):B(ne)},!0)}n(b,C)};f(N,b=>{A.ollama.error_message?b(U):b(V,!1)})}a(R),a(S),a(O),a(y);var X=o(y,2),W=t(X);let q;W.__click=()=>{e.ollama.set_manager_view("configure",null)};var $=t(W);J($,{get glyph(){return Ve}}),T(2),a(W);var i=o(W,2);let s;i.__click=()=>e.ollama.set_manager_view("pull",null);var _=t(i);J(_,{get glyph(){return De}}),T(2),a(i);var j=o(i,2);let te;j.__click=()=>e.ollama.set_manager_view("create",null);var F=t(j);J(F,{get glyph(){return ze}}),T(2),a(j);var K=o(j,2);let le;K.__click=()=>e.ollama.set_manager_view("copy",null);var ce=t(K);J(ce,{get glyph(){return Re}}),T(2),a(K),a(X),a(d);var E=o(d,2);{var c=b=>{var C=mt(),se=de(C),ne=t(se),ve=t(ne);a(ne);var B=o(ne,2);we(B,21,()=>e.ollama.models_downloaded,ee=>ee.id,(ee,me)=>{var Z=dt(),_e=t(Z);Fe(_e,{get model(){return r(me)}}),a(Z),Le(3,Z,()=>je),n(ee,Z)}),a(B),a(se);var oe=o(se,2);{var re=ee=>{var me=vt(),Z=t(me),_e=t(Z);a(Z);var Ee=o(Z,2);we(Ee,21,()=>e.ollama.models_not_downloaded,ke=>ke.id,(ke,Ae)=>{var ue=ct(),Ce=t(ue);Fe(Ce,{get model(){return r(Ae)},onclick:async()=>{await r(Ae).navigate_to_download()}}),a(ue),Le(3,ue,()=>je),n(ke,ue)}),a(Ee),a(me),x(()=>Y(_e,`${e.ollama.models_not_downloaded.length??""} not downloaded`)),n(ee,me)};f(oe,ee=>{e.ollama.models_not_downloaded.length>0&&ee(re)})}x(ee=>Y(ve,`${e.ollama.models_downloaded.length??""} model${ee??""}`),[()=>Je(e.ollama.models_downloaded.length)]),n(b,C)},z=b=>{var C=be(),se=de(C);{var ne=ve=>{var B=ut(),oe=t(B),re=o(t(oe));re.__click=()=>e.ollama.set_manager_view("pull",null);var ee=o(re,2);Me(ee,{href:"https://github.com/ollama/ollama",children:(me,Z)=>{T();var _e=ie("Ollama CLI");n(me,_e)},$$slots:{default:!0}}),a(oe),a(B),x(()=>re.disabled=e.ollama.manager_selected_view==="pull"),Le(3,B,()=>je),n(ve,B)};f(se,ve=>{e.ollama.available&&ve(ne)},!0)}n(b,C)};f(E,b=>{e.ollama.models_downloaded.length>0?b(c):b(z,!1)})}a(u),a(w);var ae=o(w,2),Q=t(ae);{var v=b=>{{let C=D(()=>e.ollama.manager_last_active_view?.view??null);Sa(b,{get ollama(){return e.ollama},get last_active_view(){return r(C)},onshowpull:()=>e.ollama.set_manager_view("pull",null),onback:()=>e.ollama.manager_back_to_last_view()})}},P=b=>{var C=be(),se=de(C);{var ne=B=>{var oe=ft(),re=t(oe);ya(re,{get model(){return e.ollama.manager_selected_model},onshow:ee=>e.ollama.app.api.ollama_show({model:ee.name}),onclose:()=>e.ollama.close_form(),ondelete:ee=>e.ollama.delete(ee.name)}),a(oe),n(B,oe)},ve=B=>{var oe=be(),re=de(oe);{var ee=Z=>{Ja(Z,{get ollama(){return e.ollama},oncancel:()=>e.ollama.close_form()})},me=Z=>{var _e=be(),Ee=de(_e);{var ke=ue=>{Qa(ue,{get ollama(){return e.ollama},onclose:()=>e.ollama.close_form(),onshowpull:()=>e.ollama.set_manager_view("pull",null)})},Ae=ue=>{var Ce=be(),Qe=de(Ce);{var Ze=Ie=>{tt(Ie,{get ollama(){return e.ollama},onclose:()=>e.ollama.close_form()})};f(Qe,Ie=>{e.ollama.manager_selected_view==="copy"&&Ie(Ze)},!0)}n(ue,Ce)};f(Ee,ue=>{e.ollama.manager_selected_view==="create"?ue(ke):ue(Ae,!1)},!0)}n(Z,_e)};f(re,Z=>{e.ollama.manager_selected_view==="pull"?Z(ee):Z(me,!1)},!0)}n(B,oe)};f(se,B=>{e.ollama.manager_selected_view==="model"&&e.ollama.manager_selected_model?B(ne):B(ve,!1)},!0)}n(b,C)};f(Q,b=>{e.ollama.manager_selected_view==="configure"?b(v):b(P,!1)})}a(ae),a(h),x(()=>{H=Pe(O,1,"flex_1 chip plain display_flex justify_content_start font_weight_400",null,H,{color_b:e.ollama.available,color_c:!e.ollama.available&&r(g)==="failure",color_d:!e.ollama.available&&r(g)==="pending",color_e:!e.ollama.available&&r(g)==="initial"}),Y(k,`Ollama ${e.ollama.available?"connected":r(g)==="failure"?"unavailable":r(g)==="pending"?"connecting":"not checked"} `),q=Pe(W,1,"width_100 justify_content_start border_radius_0 plain menu_item selectable font_weight_500",null,q,{selected:e.ollama.manager_selected_view==="configure"}),s=Pe(i,1,"width_100 justify_content_start border_radius_0 plain menu_item selectable font_weight_500",null,s,{selected:e.ollama.manager_selected_view==="pull"}),i.disabled=!e.ollama.available,te=Pe(j,1,"width_100 justify_content_start border_radius_0 plain menu_item selectable font_weight_500",null,te,{selected:e.ollama.manager_selected_view==="create"}),j.disabled=!e.ollama.available,le=Pe(K,1,"width_100 justify_content_start border_radius_0 plain menu_item selectable font_weight_500",null,le,{selected:e.ollama.manager_selected_view==="copy"}),K.disabled=!e.ollama.available||e.ollama.models_downloaded.length===0}),n(I,h),pe()}Oe(["click"]);var bt=m('<h1 class="mb_md"> </h1>'),ht=m('<h2 class="mb_md"><!></h2>'),yt=m('<div class="width_upto_md mb_lg"><!> <!></div>'),xt=m('<div><section class="display_flex mb_lg"><div class="display_flex"><!> <div class="pl_xl"><!> <p class="mb_md"> </p> <p class="mb_md"><!> </p> <div class="row gap_xl"><!> <!></div></div></div></section> <section><!></section> <section><aside>⚠️ This information is incomplete and may be incorrect or outdated.</aside> <ul class="display_flex flex_wrap_wrap unstyled gap_md"></ul></section></div>');function wt(I,e){fe(e,!0);const l=D(()=>oa.url.pathname===la(`/providers/${e.provider.name}`)),A=Ge.get();var p=xt();ta(p,()=>({...e.attrs,class:`panel p_lg ${e.attrs?.class??""}`}));var g=t(p),h=t(g),w=t(h);sa(w,{get name(){return e.provider.name},size:"var(--icon_size_xl)",fill:null});var u=o(w,2),d=t(u);{var y=i=>{var s=bt(),_=t(s,!0);a(s),x(()=>Y(_,e.provider.title)),n(i,s)},O=i=>{var s=ht(),_=t(s);Me(_,{get href(){return e.provider.url},children:(j,te)=>{T();var F=ie();x(()=>Y(F,e.provider.title)),n(j,F)},$$slots:{default:!0}}),a(s),n(i,s)};f(d,i=>{r(l)?i(y):i(O,!1)})}var H=o(d,2),S=t(H,!0);a(H);var L=o(H,2),k=t(L);J(k,{get glyph(){return fa}});var M=o(k,1,!0);a(L);var G=o(L,2),R=t(G);Me(R,{get href(){return e.provider.homepage},children:(i,s)=>{T();var _=ie();x(j=>Y(_,j),[()=>ia(e.provider.homepage)]),n(i,_)},$$slots:{default:!0}});var N=o(R,2);Me(N,{get href(){return e.provider.url},children:(i,s)=>{T();var _=ie("docs");n(i,_)},$$slots:{default:!0}}),a(G),a(u),a(h),a(g);var U=o(g,2),V=t(U);{var X=i=>{gt(i,{get ollama(){return A.ollama}})},W=i=>{var s=yt(),_=t(s);ha(_,{get provider_name(){return e.provider.name},show_info:!1});var j=o(_,2);{var te=F=>{Me(F,{get href(){return e.provider.api_key_url},children:(K,le)=>{T();var ce=ie("get API key");n(K,ce)},$$slots:{default:!0}})};f(j,F=>{e.provider.api_key_url&&F(te)})}a(s),n(i,s)};f(V,i=>{e.provider.name==="ollama"?i(X):i(W,!1)})}a(U);var q=o(U,2),$=o(t(q),2);we($,20,()=>e.provider.models,i=>i,(i,s)=>{wa(i,{get model(){return s},omit_provider:!0})}),a($),a(q),a(p),x(()=>{Y(S,e.provider.company),Y(M,e.provider.name)}),n(I,p),pe()}var kt=m('<div class="p_sm"><!></div>');function Jt(I,e){fe(e,!0);const l=Ge.get(),A=D(()=>l.providers.find_by_name(e.params.slug));var p=kt(),g=t(p);{var h=u=>{wt(u,{get provider(){return r(A)}})},w=u=>{var d=be(),y=de(d);{var O=H=>{aa(H,{status:"error",children:(S,L)=>{T();var k=ie();x(()=>Y(k,`no provider found with name "${e.params.slug??""}"`)),n(S,k)},$$slots:{default:!0}})};f(y,H=>{H(O)},!0)}n(u,d)};f(g,u=>{r(A)?u(h):u(w,!1)})}a(p),n(I,p),pe()}export{Jt as component};
